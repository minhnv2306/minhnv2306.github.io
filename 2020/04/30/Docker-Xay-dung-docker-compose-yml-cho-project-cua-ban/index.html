<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>[Docker] Xây dựng docker-compose.yml file cho project của bạn ..... - Hello, I am Minh</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Hello, I am Minh"><meta name="msapplication-TileImage" content="/img/my_favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Hello, I am Minh"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="Nhật ký cho quá trình tự xây dựng docker-compose.yml cho dự án “Hello World” Laravel."><meta property="og:type" content="blog"><meta property="og:title" content="[Docker] Xây dựng docker-compose.yml file cho project của bạn ....."><meta property="og:url" content="http://yoursite.com/2020/04/30/Docker-Xay-dung-docker-compose-yml-cho-project-cua-ban/"><meta property="og:site_name" content="Hello, I am Minh"><meta property="og:description" content="Nhật ký cho quá trình tự xây dựng docker-compose.yml cho dự án “Hello World” Laravel."><meta property="og:locale" content="en_US"><meta property="og:image" content="http://yoursite.com/img/og_image.png"><meta property="article:published_time" content="2020-04-30T14:03:19.000Z"><meta property="article:modified_time" content="2021-04-10T00:07:10.623Z"><meta property="article:author" content="Ming"><meta property="article:tag" content="docker-compose.yml"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://yoursite.com/2020/04/30/Docker-Xay-dung-docker-compose-yml-cho-project-cua-ban/"},"headline":"[Docker] Xây dựng docker-compose.yml file cho project của bạn .....","image":["http://yoursite.com/img/og_image.png"],"datePublished":"2020-04-30T14:03:19.000Z","dateModified":"2021-04-10T00:07:10.623Z","author":{"@type":"Person","name":"Ming"},"description":"Nhật ký cho quá trình tự xây dựng docker-compose.yml cho dự án “Hello World” Laravel."}</script><link rel="canonical" href="http://yoursite.com/2020/04/30/Docker-Xay-dung-docker-compose-yml-cho-project-cua-ban/"><link rel="icon" href="/img/my_favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-112002191-2" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-112002191-2');</script><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.png" alt="Hello, I am Minh" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="http://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-04-30T14:03:19.000Z" title="4/30/2020, 9:03:19 PM">2020-04-30</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-04-10T00:07:10.623Z" title="4/10/2021, 7:07:10 AM">2021-04-10</time></span><span class="level-item"><a class="link-muted" href="/categories/Development-and-Operation/">Development and Operation</a><span> / </span><a class="link-muted" href="/categories/Development-and-Operation/Docker/">Docker</a></span><span class="level-item">22 minutes read (About 3293 words)</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>&nbsp;visits</span></div></div><h1 class="title is-3 is-size-4-mobile">[Docker] Xây dựng docker-compose.yml file cho project của bạn .....</h1><div class="content"><p>Nhật ký cho quá trình tự xây dựng <code>docker-compose.yml</code> cho dự án “Hello World” Laravel.</p>
<a id="more"></a>
<h1 id="Truoc-khi-ban-bat-dau"><a href="#Truoc-khi-ban-bat-dau" class="headerlink" title="Trước khi bạn bắt đầu"></a>Trước khi bạn bắt đầu</h1><ul>
<li>Bạn cần có những hiểu biết cơ bản về Docker và Docker compose.</li>
<li>Kiến thức về nginx, cấu hình virtual host cho nginx.</li>
<li>Bài viết sẽ setup virtual với hàm <code>phpinfo()</code> trước tiên. Sau đó sẽ đổi đường dẫn root sang Laravel project để chạy ứng dụng của bạn ở mức cơ bản.</li>
</ul>
<h1 id="Hay-bat-dau-tu-viec-cai-dat-ma-khong-Docker"><a href="#Hay-bat-dau-tu-viec-cai-dat-ma-khong-Docker" class="headerlink" title="Hãy bắt đầu từ việc cài đặt mà không Docker .."></a>Hãy bắt đầu từ việc cài đặt mà không Docker ..</h1><blockquote class="colorquote danger"><p>Khoan nói về các ứng dụng Laravel phức tạp, ở đây, tôi chỉ đề cập ở mức độ cài đặt Laravel project trang chủ và có thể migrate bảng user có sẵn.</p>
</blockquote>
<p>Hãy bắt đầu cài đặt ứng dụng từ việc không sử dụng Docker. <strong>LAMP (Linux, Apache2, MySQL, PHP)</strong>, <strong>LEMP (Linux, Nginx, MySQL, PHP)</strong> là 2 cụm từ “tìm kiếm” kinh điển. Nó là bộ các công cụ giúp bạn cài đặt một ứng dụng web thông thường để hoạt động.</p>
<p>Về cơ bản, mọi ứng dụng web để chạy được bạn cần tối thiểu 3 phần sau:</p>
<ul>
<li>Web server: Nginx hoặc Apache2 là những sự lựa chọn phổ biến</li>
<li>Ngôn ngữ lập trình: tất nhiên :D, bạn phải cho web server biết là mình dùng ngôn ngữ lập trình nào chứ.</li>
<li>Database: Nơi sẽ lưu dữ liệu cho ứng dụng</li>
</ul>
<p>LAMP, LEMP đều chính là 3 phần trên (Linux thì mình sẽ nói sau nhé). Trong phạm vi bài viết, mình sẽ sử dụng LEMP.</p>
<p>Khi cài đặt LEMP xong, chúng ta cần cấu hình 1 virtual host để chạy ứng dụng với domain. Trước hết chúng ta cứ làm hiển thị thông tin PHP qua hàm <code>phpinfo()</code>, sau rồi chuyển cấu hình cho Laravel project là ngon :D</p>
<p><strong>Bước 1: Bạn cần thay đổi cấu hình nginx</strong></p>
<p>Bạn cần để nginx trỏ tới host chứa file <code>index.php</code>. Cơ bản nó sẽ như sau:</p>
<figure class="highlight plain"><figcaption><span>conf.d nginx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen  80;</span><br><span class="line"></span><br><span class="line">    server_name localhost;</span><br><span class="line">	</span><br><span class="line">	# Cái này quan trọng nè, root của project</span><br><span class="line">    root &#x2F;var&#x2F;www&#x2F;html;</span><br><span class="line"></span><br><span class="line">    index index.php index.html index.htm;</span><br><span class="line"></span><br><span class="line">    error_log &#x2F;var&#x2F;log&#x2F;nginx&#x2F;laravel.error.log;</span><br><span class="line">    access_log &#x2F;var&#x2F;log&#x2F;nginx&#x2F;laravel.access.log;</span><br><span class="line"></span><br><span class="line">    location &#x2F; &#123;</span><br><span class="line">        try_files $uri $uri&#x2F; &#x2F;index.php?$query_string;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    # PHP-FPM Configuration Nginx</span><br><span class="line">    location ~ \.php$ &#123;</span><br><span class="line">        try_files $uri &#x3D; 404;</span><br><span class="line">        fastcgi_split_path_info ^(.+\.php)(&#x2F;.+)$;</span><br><span class="line">        fastcgi_pass localhost:9000;</span><br><span class="line">        fastcgi_index index.php;</span><br><span class="line">        include fastcgi_params;</span><br><span class="line">        fastcgi_param REQUEST_URI $request_uri;</span><br><span class="line">        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</span><br><span class="line">        fastcgi_param PATH_INFO $fastcgi_path_info;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Bước 2: Thêm file <code>index.php</code></strong></p>
<p>Cũng không cần giải thích nhiều. Từ cấu hình trên, ta có thể thấy, bạn cần có 1 file index.php ở thư mục /var/www/html là xong :D<br><figure class="highlight php"><figcaption><span>conf.d nginx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">echo</span> phpinfo();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>Như vậy là khi vào <a target="_blank" rel="noopener" href="http://localhost">http://localhost</a>, thông tin PHP đã được hiển thị.</p>
<p>Phần chuyển cấu hình cho ứng dụng Laravel, chỉ cần đổi đường dẫn root, tôi gộp luôn vào phần 2.</p>
<h1 id="Suy-nghi-docker-hoa-LEMP"><a href="#Suy-nghi-docker-hoa-LEMP" class="headerlink" title="Suy nghĩ docker hóa LEMP"></a>Suy nghĩ docker hóa LEMP</h1><h2 id="Docker-hoa-HelloWorld-truoc-tien"><a href="#Docker-hoa-HelloWorld-truoc-tien" class="headerlink" title="Docker hóa HelloWorld trước tiên"></a>Docker hóa HelloWorld trước tiên</h2><p>Để docker hóa các phần như ở mục 1, chúng ta cần 3 images tương ứng 3 phần trong LEMP ở trên: nginx, mysql và php-fpm.</p>
<p>Bắt đầu từ cái dễ trước đi. Database tôi sử dụng MySQl, đơn giản chỉ là pull image của mysql về thôi, không cần cài cắm gì cả.</p>
<figure class="highlight yml"><figcaption><span>docker-compose.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">mysql:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mysql:5.7</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">MYSQL_DATABASE:</span> <span class="string">&#x27;laravel&#x27;</span></span><br><span class="line">      <span class="attr">MYSQL_USER:</span> <span class="string">&#x27;mingnv&#x27;</span></span><br><span class="line">      <span class="attr">MYSQL_PASSWORD:</span> <span class="string">&#x27;password&#x27;</span></span><br><span class="line">      <span class="attr">MYSQL_ROOT_PASSWORD:</span> <span class="string">&#x27;password&#x27;</span></span><br><span class="line">    <span class="comment"># Volumes này đang sử dụng theo dạng biến đó</span></span><br><span class="line">    <span class="comment"># Nó tương đương khai báo VOLUME trong Dockerfile, sinh volume dạng mã băm</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">db_data:/var/lib/mysql</span></span><br></pre></td></tr></table></figure>
<ul>
<li>Dễ nhỉ, thế là có 1 database để lưu dữ liệu rồi, tiếp theo chúng ta sẽ pull image PHP qua <code>php-fpm</code> image</li>
</ul>
<figure class="highlight yml"><figcaption><span>docker-compose.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">php-fpm:</span></span><br><span class="line">	<span class="attr">image:</span> <span class="string">php:7.2-fpm</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>Tương tự như database nhỉ. Nhưng khoan. <code>php-fpm</code> không thể đúng 1 mình được. Nó cần nói chuyện với web server, kết hợp để xử lý các request từ phía người dùng…. To be continue!</p>
</li>
<li><p>Web server: phần này là phần quan trọng nhất của ứng dụng web. Ở đây tôi sử dụng nginx nên sẽ pull image nginx về. Nhưng như tôi đã nói ở trên, web server không thể hoạt động đơn lẻ. Nó cần  có file cấu hình, trỏ tới host của bạn, lấy code và hoạt động. Do đó bạn cần phải có file Dockerfile để build.</p>
</li>
</ul>
<figure class="highlight docker"><figcaption><span>Dockerfile nginx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> nginx:latest</span><br><span class="line"></span><br><span class="line"><span class="comment"># Change Nginx config here...</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> rm /etc/nginx/conf.d/default.conf</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> ./default.conf /etc/nginx/conf.d/</span></span><br></pre></td></tr></table></figure>
<p>Config mặc định sẽ không trỏ tới host được, do đó chúng ta sẽ sử dụng file conf ở trên để thay thế <code>default.conf</code> của nginx. Bạn nhớ thay đường dẫn <code>php-fpm bằng</code> host đúng của contianer nhé</p>
<p>Lúc này bạn bật ứng dụng lên và chạy, <code>docker-compose.yml</code> sẽ có dạng như sau</p>
<figure class="highlight yml"><figcaption><span>docker-compose.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Sử dụng version 3.3 cho nó mới</span></span><br><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3.3&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">nginx:</span></span><br><span class="line">    <span class="attr">build:</span> <span class="string">./nginx</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;8080:80&quot;</span></span><br><span class="line">    <span class="comment"># Thêm depends_on để nó start php-fpm trước khi start nginx, nếu không sẽ bị báo lỗi host php-fpm không tìm thấy</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">php-fpm</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="comment"># Logging</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./nginx/log:/var/log/nginx/</span></span><br><span class="line">      <span class="comment"># Volume đến code ứng dụng</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./nginx/index.php:/var/www/html/index.php</span></span><br><span class="line">  <span class="attr">mysql:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mysql:5.7</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">MYSQL_DATABASE:</span> <span class="string">&#x27;laravel&#x27;</span></span><br><span class="line">      <span class="attr">MYSQL_USER:</span> <span class="string">&#x27;mingnv&#x27;</span></span><br><span class="line">      <span class="attr">MYSQL_PASSWORD:</span> <span class="string">&#x27;password&#x27;</span></span><br><span class="line">      <span class="attr">MYSQL_ROOT_PASSWORD:</span> <span class="string">&#x27;password&#x27;</span></span><br><span class="line">  <span class="attr">adminer:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">adminer</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">8081</span><span class="string">:8080</span></span><br><span class="line">  <span class="attr">php-fpm:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">php:7.2-fpm</span></span><br></pre></td></tr></table></figure>
<p>Thực hiện <code>docker-compose up</code> để chạy. Hmm, kết quả xuất hiện lỗi .</p>
<p>Tôi đã thực sự lúng túng trước lỗi ngày và mất tới 2 ngày để fix nó. Nguyên nhân là nó không tìm thấy file <code>index.php</code> trong khi chạy <code>php-fpm</code>. Sau khi tham khảo 1 số tài liệu, tôi mới hiểu, dù <code>nginx</code> và <code>php-fpm</code> đã nói chuyện với nhau nhưng các thư mục, files của nó không được dùng chung. Vì vậy khi bạn chỉ <code>volumes</code> file <code>index.php</code> cho <code>nginx</code>, khi thao tác của <code>php-fpm</code> không tìm thấy file này.</p>
<blockquote class="colorquote success"><p>Tất cả các services làm việc với source code (nginx, php-fpm và sau này xuất hiện thêm bạn workspace và nhiều nhân vật phụ khác) đều cần volumes chung với nhau và volumes đến source code folder.</p>
</blockquote>
<p>Và rồi kết quả cuối cùng file docker-compose.yml sẽ như sau:</p>
<p><a target="_blank" rel="noopener" href="https://github.com/minhnv2306/laravel-docker/blob/01cea0eb1af8007e6e32ba4c2803088ac98dd3ce/docker-compose.yml">https://github.com/minhnv2306/laravel-docker/blob/01cea0eb1af8007e6e32ba4c2803088ac98dd3ce/docker-compose.yml</a></p>
<p>Khi đã volume cho php-fpm và nginx như vậy, ứng dụng đã lên.</p>
<h2 id="Level-up-cho-ung-dung-Laravel-nao"><a href="#Level-up-cho-ung-dung-Laravel-nao" class="headerlink" title="Level up cho ứng dụng Laravel nào!"></a>Level up cho ứng dụng Laravel nào!</h2><p>Ở bước 2.1, chúng ta đã lên trang <code>phpinfo()</code>. Bước tiếp theo, chúng ta sẽ thay trang này bằng ứng dụng Laravel.</p>
<p>Công việc đơn giản, chỉnh đường dẫn root của ứng dụng là xong.</p>
<p><a target="_blank" rel="noopener" href="https://github.com/minhnv2306/laravel-docker/commit/35c4920de3ec51a91c5bcc59b4014e743181b6b3">https://github.com/minhnv2306/laravel-docker/commit/35c4920de3ec51a91c5bcc59b4014e743181b6b3</a></p>
<p>Như vậy đúng là xong thật, ứng dụng Laravel đã lên. Bạn đã thử kết nối chúng với database.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec php-fpm php artisan migrate</span><br></pre></td></tr></table></figure>
<p>Kết quả là nhận được 1 thông báo thiếu <code>mysql-extension</code>. Như vậy chúng ta có thể thấy rằng image <code>php-fpm</code> chỉ có những extension cơ bản nhất của php, chưa hỗ trợ mysql-extension. Công việc của chúng ta tiếp theo là cập nhật extension này</p>
<blockquote class="colorquote info"><p>Để cài thêm các extension cho php trong Docker, bạn sử dụng <code>docker-php-ext-install</code></p>
</blockquote>
<figure class="highlight docker"><figcaption><span>Dockerfile php7.2-fpm</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> php:<span class="number">7.2</span>-fpm</span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get update &amp;&amp; apt-get install -y \</span></span><br><span class="line"><span class="bash">	vim \</span></span><br><span class="line"><span class="bash">  &amp;&amp; docker-php-ext-install mysqli pdo_mysql</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">9000</span> </span><br></pre></td></tr></table></figure>
<p>Và lần này đã migrate ngon rồi nhé :D.</p>
<h1 id="Chung-ta-can-nhieu-hon-the-…"><a href="#Chung-ta-can-nhieu-hon-the-…" class="headerlink" title="Chúng ta cần nhiều hơn thế …"></a>Chúng ta cần nhiều hơn thế …</h1><p>Ứng dụng của chúng ta đã lên hình, đẹp đẽ, nếu nhìn lướt qua. Bạn có nhớ tôi đã nhắc đến Linux và có nói phần sau sẽ đề cập.</p>
<p>Trong các phần 1,2, ứng dụng của tôi đã được cài <code>composer</code>, <code>npm</code> sẵn trên máy rồi, ứng dụng mới có thể hoạt động. Nói một cách khác, tôi đã chạy các lệnh này trước đó từ máy local của mình:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">composer install</span><br><span class="line"></span><br><span class="line">npm install</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>
<p>Nhưng như vậy thì chưa đúng lắm với Docker, độc lập môi trường với máy của bạn. Chúng ta cần 1 nơi tên gọi là <code>workspace</code>để làm việc với mã nguồn như cài đặt git, xem mã nguồn, cài cắm copmoser, npm, các tool quản lý mã nguồn tương tự. Hình như tôi đang nhắc tới hệ điều hành nhỉ?</p>
<p>Đúng vậy, chúng ta sẽ tách biệt chúng ra thành 1 container riêng với tên là <strong>“workspace”</strong>, nơi làm việc với mã nguồn, cài đặt ứng dụng.</p>
<p>Đó chỉ là 1 phần bạn cần thêm. Bên cạnh đó, bạn có thể thêm thắt như contianer “data” chỉ để lưu trữ dữ liệu cho ứng dụng, container “data_test” để lưu dữ liệu cho ứng dụng khi chạy test.</p>
<p>Bạn có thể tham khảo thêm các services tại <a target="_blank" rel="noopener" href="https://github.com/FramgiaDockerTeam/laravel-microservices">đây</a></p>
<ul>
<li>nginx</li>
<li>application (for storing project source code)</li>
<li>php-fpm</li>
<li>workspace (for working around with the all project)</li>
<li>mysql</li>
<li>mysql_test (for running integration test)</li>
<li>mongodb</li>
<li>redis</li>
<li>data (for storing mysql, mongo, redis data)</li>
<li>data_test (for storing mysql, mongo, redis data while running test)</li>
<li>logs (for storing some system logs)</li>
</ul>
<h1 id="Tach-biet-cac-bien-ra-cau-hinh-…"><a href="#Tach-biet-cac-bien-ra-cau-hinh-…" class="headerlink" title="Tách biệt các biến ra cấu hình …"></a>Tách biệt các biến ra cấu hình …</h1><p>Để tăng độ nguy hiểm cho bạn, hãy thêm biến <code>.env</code> khi chạy <code>docker-compose</code>. Một hữu ích nữa nó mang lại là giúp bạn dễ maintain, thay đổi các tham số mà không cần sửa trực tiếp trong <code>docker-composer.yml</code>.</p>
<figure class="highlight yml"><figcaption><span>docker-compose.yml</span><a target="_blank" rel="noopener" href="https://github.com/laradock/laradock/blob/master/env-example">Laradock</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"><span class="string">...</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"><span class="comment">### NGINX Server #########################################</span></span><br><span class="line">    <span class="attr">nginx:</span></span><br><span class="line">      <span class="attr">build:</span></span><br><span class="line">        <span class="attr">context:</span> <span class="string">./nginx</span></span><br><span class="line">        <span class="attr">args:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">CHANGE_SOURCE=$&#123;CHANGE_SOURCE&#125;</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">PHP_UPSTREAM_CONTAINER=$&#123;NGINX_PHP_UPSTREAM_CONTAINER&#125;</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">PHP_UPSTREAM_PORT=$&#123;NGINX_PHP_UPSTREAM_PORT&#125;</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">http_proxy</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">https_proxy</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">no_proxy</span></span><br><span class="line">      <span class="attr">volumes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">$&#123;APP_CODE_PATH_HOST&#125;:$&#123;APP_CODE_PATH_CONTAINER&#125;$&#123;APP_CODE_CONTAINER_FLAG&#125;</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">$&#123;NGINX_HOST_LOG_PATH&#125;:/var/log/nginx</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">$&#123;NGINX_SITES_PATH&#125;:/etc/nginx/sites-available</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">$&#123;NGINX_SSL_PATH&#125;:/etc/nginx/ssl</span></span><br><span class="line">      <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">&quot;$&#123;NGINX_HOST_HTTP_PORT&#125;:80&quot;</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">&quot;$&#123;NGINX_HOST_HTTPS_PORT&#125;:443&quot;</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">&quot;$&#123;VARNISH_BACKEND_PORT&#125;:81&quot;</span></span><br><span class="line">      <span class="attr">depends_on:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">php-fpm</span></span><br><span class="line">      <span class="attr">networks:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">frontend</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">backend</span></span><br><span class="line"><span class="string">...</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><figcaption><span>.env</span><a target="_blank" rel="noopener" href="https://github.com/laradock/laradock/blob/master/docker-compose.yml">Laradock</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">### NGINX #################################################</span><br><span class="line"></span><br><span class="line">NGINX_HOST_HTTP_PORT&#x3D;80</span><br><span class="line">NGINX_HOST_HTTPS_PORT&#x3D;443</span><br><span class="line">NGINX_HOST_LOG_PATH&#x3D;.&#x2F;logs&#x2F;nginx&#x2F;</span><br><span class="line">NGINX_SITES_PATH&#x3D;.&#x2F;nginx&#x2F;sites&#x2F;</span><br><span class="line">NGINX_PHP_UPSTREAM_CONTAINER&#x3D;php-fpm</span><br><span class="line">NGINX_PHP_UPSTREAM_PORT&#x3D;9000</span><br><span class="line">NGINX_SSL_PATH&#x3D;.&#x2F;nginx&#x2F;ssl&#x2F;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h1 id="Cuoi-cung-toi-duc-ket-duoc-gi"><a href="#Cuoi-cung-toi-duc-ket-duoc-gi" class="headerlink" title="Cuối cùng tôi đúc kết được gì"></a>Cuối cùng tôi đúc kết được gì</h1><ul>
<li>Bạn nên tách ứng dụng thành các services đơn lẻ để dễ quản lý, nó cũng là 1 phần của <a target="_blank" rel="noopener" href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#decouple-applications">best practice</a> cho docker</li>
<li>Tất cả các services làm việc với source code (nginx, php-fpm, workspace …) đều cần volumes chung với nhau và volumes đến source code folder.</li>
<li>Bạn cần có các services cơ bản để có thể chạy được ứng dụng (php-fpm, nginx, database). Bên cạnh đó là 1 service để làm việc với mã nguồn, cài đặt mã nguồn (composer, npm) với tên <strong>workspace</strong>.<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker-compose exec workspace composer install</span><br><span class="line">docker-compose exec workspace php artisan key:generate</span><br><span class="line">docker-compose exec workspace php artisan migrate</span><br><span class="line">docker-compose exec workspace php artisan db:seed</span><br><span class="line">docker-compose exec workspace yarn</span><br><span class="line">docker-compose exec workspace yarn watch</span><br><span class="line"></span><br><span class="line"># For testing</span><br><span class="line">docker-compose exec workspace php artisan db:seed --class&#x3D;TestDataSeeder</span><br></pre></td></tr></table></figure></li>
<li>Tách các tham số trong <code>docker-composer.yml</code> ra file cấu hình cho dễ quản lý và thay đổi.</li>
</ul>
<h1 id="Tai-lieu-tham-khao"><a href="#Tai-lieu-tham-khao" class="headerlink" title="Tài liệu tham khảo"></a>Tài liệu tham khảo</h1><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/laradock/laradock">Laradock</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/FramgiaDockerTeam/laravel-microservices">Laravel Microservices - Framgia Docker Team</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.docker.com/compose/env-file/">Declare default environment variables in file</a></li>
</ul>
</div><div class="article-licensing box"><div class="licensing-title"><p>[Docker] Xây dựng docker-compose.yml file cho project của bạn .....</p><p><a href="http://yoursite.com/2020/04/30/Docker-Xay-dung-docker-compose-yml-cho-project-cua-ban/">http://yoursite.com/2020/04/30/Docker-Xay-dung-docker-compose-yml-cho-project-cua-ban/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>Ming</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2020-04-30</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2021-04-10</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/docker-compose-yml/">docker-compose.yml</a></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><div class="social-share"></div><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button donate" href="https://www.buymeacoffee.com/mingnv" target="_blank" rel="noopener" data-type="buymeacoffee"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>Buy me a coffee</span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2020/04/30/Docker-Compose-file-version-3-reference/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">[Docker] Compose file version 3 reference</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/04/26/Laravel-Useful-Laravel-Packages/"><span class="level-item">[Laravel] Useful Laravel Packages</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'http://yoursite.com/2020/04/30/Docker-Xay-dung-docker-compose-yml-cho-project-cua-ban/';
            this.page.identifier = '2020/04/30/Docker-Xay-dung-docker-compose-yml-cho-project-cua-ban/';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'minh' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="https://octodex.github.com/images/spidertocat.png" alt="Minh NV"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Minh NV</p><p class="is-size-6 is-block">_N.V.M_</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Hanoi city, Vietnam</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">115</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">33</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">44</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/minhnv2306" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/minhnv2306"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://www.facebook.com/profile.php?id=100003860456359"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="http://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="http://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-08-01T11:33:54.000Z">2021-08-01</time></p><p class="title"><a href="/2021/08/01/Tan-man-ve-index-trong-MySQL/">Tản mạn về index trong MySQL</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-07-14T14:54:50.000Z">2021-07-14</time></p><p class="title"><a href="/2021/07/14/Section-18-Account-Management-Billing-Support/">Section 18- Account Management, Billing &amp; Support</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-06-11T11:28:44.000Z">2021-06-11</time></p><p class="title"><a href="/2021/06/11/Note-choi-choi-1106/">Note chơi chơi 1106</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-05-22T15:59:30.000Z">2021-05-22</time></p><p class="title"><a href="/2021/05/22/Section-16-Security-Compliance/">Section 16- Security &amp; Compliance</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-05-22T03:31:32.000Z">2021-05-22</time></p><p class="title"><a href="/2021/05/22/Section-14-Cloud-Monitoring/">Section 14- Cloud Monitoring</a></p></div></article></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/AWS-Training/"><span class="level-start"><span class="level-item">AWS Training</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/Authentication/"><span class="level-start"><span class="level-item">Authentication</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Clean-our-code/"><span class="level-start"><span class="level-item">Clean our code</span></span><span class="level-end"><span class="level-item tag">13</span></span></a><ul><li><a class="level is-mobile" href="/categories/Clean-our-code/Clean-code-Robert-C-Martin/"><span class="level-start"><span class="level-item">Clean code - Robert C. Martin</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/Clean-our-code/Refactoring-to-Collections/"><span class="level-start"><span class="level-item">Refactoring to Collections</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Database/"><span class="level-start"><span class="level-item">Database</span></span><span class="level-end"><span class="level-item tag">2</span></span></a><ul><li><a class="level is-mobile" href="/categories/Database/MongoDB/"><span class="level-start"><span class="level-item">MongoDB</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Database/MySQL/"><span class="level-start"><span class="level-item">MySQL</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Development-and-Operation/"><span class="level-start"><span class="level-item">Development and Operation</span></span><span class="level-end"><span class="level-item tag">32</span></span></a><ul><li><a class="level is-mobile" href="/categories/Development-and-Operation/CircleCI-2-0/"><span class="level-start"><span class="level-item">CircleCI 2.0</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/Development-and-Operation/Docker/"><span class="level-start"><span class="level-item">Docker</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/categories/Development-and-Operation/Google-Cloud-Platform/"><span class="level-start"><span class="level-item">Google Cloud Platform</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Development-and-Operation/Laravel/"><span class="level-start"><span class="level-item">Laravel</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/categories/Development-and-Operation/Linux-OS/"><span class="level-start"><span class="level-item">Linux OS</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/Development-and-Operation/Web-Server/"><span class="level-start"><span class="level-item">Web Server</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/JAVaScript/"><span class="level-start"><span class="level-item">JAVaScript</span></span><span class="level-end"><span class="level-item tag">6</span></span></a><ul><li><a class="level is-mobile" href="/categories/JAVaScript/Asynchronous/"><span class="level-start"><span class="level-item">Asynchronous</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/JAVaScript/Event/"><span class="level-start"><span class="level-item">Event</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/JAVaScript/React/"><span class="level-start"><span class="level-item">React</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/JP/"><span class="level-start"><span class="level-item">JP</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/Others/"><span class="level-start"><span class="level-item">Others</span></span><span class="level-end"><span class="level-item tag">13</span></span></a><ul><li><a class="level is-mobile" href="/categories/Others/Cong-cu-lap-trinh/"><span class="level-start"><span class="level-item">Công cụ lập trình</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Others/PHPCS/"><span class="level-start"><span class="level-item">PHPCS</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Others/Suu-tam/"><span class="level-start"><span class="level-item">Sưu tầm</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Others/Website-Optimization/"><span class="level-start"><span class="level-item">Website Optimization</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/The-Art-of-Readable-Code/"><span class="level-start"><span class="level-item">The Art of Readable Code</span></span><span class="level-end"><span class="level-item tag">19</span></span></a><ul><li><a class="level is-mobile" href="/categories/The-Art-of-Readable-Code/Chapter-1-Code-Should-Be-Easy-to-Understand/"><span class="level-start"><span class="level-item">Chapter 1 - Code Should Be Easy to Understand</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/The-Art-of-Readable-Code/Part-I-Surface-Level-Improvements/"><span class="level-start"><span class="level-item">Part I - Surface-Level Improvements</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/The-Art-of-Readable-Code/Part-II-Simplifying-Loops-and-Logic/"><span class="level-start"><span class="level-item">Part II - Simplifying Loops and Logic</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/The-Art-of-Readable-Code/Part-III-Reorganizing-Your-Code/"><span class="level-start"><span class="level-item">Part III - Reorganizing Your Code</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/The-Art-of-Readable-Code/Part-IV-Selected-Topics/"><span class="level-start"><span class="level-item">Part IV - Selected Topics</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Unit-Test/"><span class="level-start"><span class="level-item">Unit Test</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/special-day/"><span class="level-start"><span class="level-item">special day</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2021/08/"><span class="level-start"><span class="level-item">August 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/07/"><span class="level-start"><span class="level-item">July 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/06/"><span class="level-start"><span class="level-item">June 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/05/"><span class="level-start"><span class="level-item">May 2021</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/04/"><span class="level-start"><span class="level-item">April 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/02/"><span class="level-start"><span class="level-item">February 2021</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/01/"><span class="level-start"><span class="level-item">January 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/06/"><span class="level-start"><span class="level-item">June 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/05/"><span class="level-start"><span class="level-item">May 2020</span></span><span class="level-end"><span class="level-item tag">23</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/04/"><span class="level-start"><span class="level-item">April 2020</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/02/"><span class="level-start"><span class="level-item">February 2020</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/01/"><span class="level-start"><span class="level-item">January 2020</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/12/"><span class="level-start"><span class="level-item">December 2019</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/11/"><span class="level-start"><span class="level-item">November 2019</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/09/"><span class="level-start"><span class="level-item">September 2019</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/07/"><span class="level-start"><span class="level-item">July 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/04/"><span class="level-start"><span class="level-item">April 2019</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/API/"><span class="tag">API</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CI-CD/"><span class="tag">CI/CD</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Kanji/"><span class="tag">Kanji</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux-command-line/"><span class="tag">Linux command line</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/apache2/"><span class="tag">apache2</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/async-programing/"><span class="tag">async programing</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/authentication/"><span class="tag">authentication</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/clean-comment/"><span class="tag">clean comment</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/clean-error/"><span class="tag">clean error</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/clean-function/"><span class="tag">clean function</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/collection/"><span class="tag">collection</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/configuration/"><span class="tag">configuration</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker/"><span class="tag">docker</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker-command/"><span class="tag">docker command</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker-compose-file-format/"><span class="tag">docker compose file format</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker-best-practice/"><span class="tag">docker-best-practice</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker-compose-yml/"><span class="tag">docker-compose.yml</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker-instructions-docker-best-practice/"><span class="tag">docker-instructions docker-best-practice</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker-network/"><span class="tag">docker-network</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker-volume/"><span class="tag">docker-volume</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/event/"><span class="tag">event</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/event-notification/"><span class="tag">event notification</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/excelfile/"><span class="tag">excelfile</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/gcp/"><span class="tag">gcp</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/git/"><span class="tag">git</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/groupby-mysql/"><span class="tag">groupby, mysql</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jquery-validation/"><span class="tag">jquery-validation</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/kubernetes/"><span class="tag">kubernetes</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mongoDB/"><span class="tag">mongoDB</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/naming/"><span class="tag">naming</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/phpcs/"><span class="tag">phpcs</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/phpcs-phpcsfixer/"><span class="tag">phpcs phpcsfixer</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/process-management/"><span class="tag">process management</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/react-boilerplate/"><span class="tag">react boilerplate</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/regex/"><span class="tag">regex</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/requests/"><span class="tag">requests</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/stripe/"><span class="tag">stripe</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sudo-command/"><span class="tag">sudo command</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tips-laravel/"><span class="tag">tips laravel</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tracking-php-script/"><span class="tag">tracking php script</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/unit-test/"><span class="tag">unit test</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/validation/"><span class="tag">validation</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vba/"><span class="tag">vba</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vim/"><span class="tag">vim</span><span class="tag">1</span></a></div></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe for updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="level is-mobile" href="#Truoc-khi-ban-bat-dau"><span class="level-left"><span class="level-item">1</span><span class="level-item">Trước khi bạn bắt đầu</span></span></a></li><li><a class="level is-mobile" href="#Hay-bat-dau-tu-viec-cai-dat-ma-khong-Docker"><span class="level-left"><span class="level-item">2</span><span class="level-item">Hãy bắt đầu từ việc cài đặt mà không Docker ..</span></span></a></li><li><a class="level is-mobile" href="#Suy-nghi-docker-hoa-LEMP"><span class="level-left"><span class="level-item">3</span><span class="level-item">Suy nghĩ docker hóa LEMP</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Docker-hoa-HelloWorld-truoc-tien"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">Docker hóa HelloWorld trước tiên</span></span></a></li><li><a class="level is-mobile" href="#Level-up-cho-ung-dung-Laravel-nao"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">Level up cho ứng dụng Laravel nào!</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Chung-ta-can-nhieu-hon-the-…"><span class="level-left"><span class="level-item">4</span><span class="level-item">Chúng ta cần nhiều hơn thế …</span></span></a></li><li><a class="level is-mobile" href="#Tach-biet-cac-bien-ra-cau-hinh-…"><span class="level-left"><span class="level-item">5</span><span class="level-item">Tách biệt các biến ra cấu hình …</span></span></a></li><li><a class="level is-mobile" href="#Cuoi-cung-toi-duc-ket-duoc-gi"><span class="level-left"><span class="level-item">6</span><span class="level-item">Cuối cùng tôi đúc kết được gì</span></span></a></li><li><a class="level is-mobile" href="#Tai-lieu-tham-khao"><span class="level-left"><span class="level-item">7</span><span class="level-item">Tài liệu tham khảo</span></span></a></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://blog.zhangruipeng.me/hexo-theme-icarus/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Icarus blog</span></span><span class="level-right"><span class="level-item tag">blog.zhangruipeng.me</span></span></a></li><li><a class="level is-mobile" href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Icarus github</span></span><span class="level-right"><span class="level-item tag">github.com</span></span></a></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.png" alt="Hello, I am Minh" height="28"></a><p class="is-size-7"><span>&copy; 2021 Ming</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">Visited by <span id="busuanzi_value_site_uv">0</span> users</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>