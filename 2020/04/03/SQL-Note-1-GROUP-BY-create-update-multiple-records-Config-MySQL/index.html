<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>[SQL] Note 1: GROUP BY, create-update multiple records, Config MySQL - Hello, I am Minh</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Hello, I am Minh"><meta name="msapplication-TileImage" content="/img/my_favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Hello, I am Minh"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="Note lại 1 vài tips khi làm việc với MySQL nào!!"><meta property="og:type" content="blog"><meta property="og:title" content="[SQL] Note 1: GROUP BY, create-update multiple records, Config MySQL"><meta property="og:url" content="http://yoursite.com/2020/04/03/SQL-Note-1-GROUP-BY-create-update-multiple-records-Config-MySQL/"><meta property="og:site_name" content="Hello, I am Minh"><meta property="og:description" content="Note lại 1 vài tips khi làm việc với MySQL nào!!"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://yoursite.com/img/og_image.png"><meta property="article:published_time" content="2020-04-03T16:18:26.000Z"><meta property="article:modified_time" content="2022-07-24T14:29:44.973Z"><meta property="article:author" content="Ming"><meta property="article:tag" content="mysql"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://yoursite.com/2020/04/03/SQL-Note-1-GROUP-BY-create-update-multiple-records-Config-MySQL/"},"headline":"[SQL] Note 1: GROUP BY, create-update multiple records, Config MySQL","image":["http://yoursite.com/img/og_image.png"],"datePublished":"2020-04-03T16:18:26.000Z","dateModified":"2022-07-24T14:29:44.973Z","author":{"@type":"Person","name":"Ming"},"description":"Note lại 1 vài tips khi làm việc với MySQL nào!!"}</script><link rel="canonical" href="http://yoursite.com/2020/04/03/SQL-Note-1-GROUP-BY-create-update-multiple-records-Config-MySQL/"><link rel="icon" href="/img/my_favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-112002191-2" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-112002191-2');</script><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="https://octodex.github.com/images/privateinvestocat.jpg" alt="Hello, I am Minh" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="http://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-04-03T16:18:26.000Z" title="4/3/2020, 11:18:26 PM">2020-04-03</time></span><span class="level-item">Updated&nbsp;<time dateTime="2022-07-24T14:29:44.973Z" title="7/24/2022, 9:29:44 PM">2022-07-24</time></span><span class="level-item"><a class="link-muted" href="/categories/Database/">Database</a><span> / </span><a class="link-muted" href="/categories/Database/MySQL/">MySQL</a></span><span class="level-item">14 minutes read (About 2076 words)</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>&nbsp;visits</span></div></div><h1 class="title is-3 is-size-4-mobile">[SQL] Note 1: GROUP BY, create-update multiple records, Config MySQL</h1><div class="content"><p>Note lại 1 vài tips khi làm việc với MySQL nào!!<br><span id="more"></span></p>
<h1 id="GROUP-BY…"><a href="#GROUP-BY…" class="headerlink" title="GROUP BY…."></a>GROUP BY….</h1><p>Chắc hẳn khi làm việc với MySQL, chúng ta gặp rất nhiều <code>GROUP BY</code> và đôi khi gặp lỗi với nó.</p>
<p>Câu lệnh này nhóm các cột giống giá trị với nhau vào trong cột chung, tóm gọn lại, như “tìm kiếm số lượng khách hàng cho mỗi đất nước”</p>
<p>Lệnh này cũng hay được sử dụng với các phép toán gộp lại như COUNT, MAX, MIN, SUM, AVG để nhóm kết quả của tập kết quả khi group thành 1 hoặc nhiều cột</p>
<h2 id="Cu-phap"><a href="#Cu-phap" class="headerlink" title="Cú pháp"></a>Cú pháp</h2><p>Cú pháp chung của cú pháp này được <strong>w3schools</strong> giới thiệu như sau:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name(s)</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">condition</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> column_name(s)</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> column_name(s);</span><br></pre></td></tr></table></figure>
<p>Như cú pháp chung ở trên chúng ta có thể thấy những cột được group thì mới có thể <code>SELECT</code>. Điều này cũng dễ hiểu, ví dụ như bạn thực hiện lấy ra tên của khách hàng đó trong 1 nhóm khách hàng của mỗi quốc gia, tên họ khác nhau, câu hỏi đặt ra là chúng ta lấy tên của ai?</p>
<h2 id="ONLY-FULL-GROUP-BY-mode"><a href="#ONLY-FULL-GROUP-BY-mode" class="headerlink" title="ONLY_FULL_GROUP_BY mode"></a><code>ONLY_FULL_GROUP_BY</code> mode</h2><p>Theo <a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/sql-mode.html#sqlmode_only_full_group_by">trang chủ mysql</a>, chế độ này từ chối các truy vấn cái mà có danh sách select, điều kiện <code>HAVING</code> hoặc <code>ORDER BY</code> có các cột kết hợp từ nhóm (<strong>nonaggregated columns)</strong> không trong <code>GROUP BY</code> hoặc không trong các hàm (để xác định duy nhất giá trị) bởi <code>GROUP BY</code>. Vì lúc đó, bạn lấy tên khách hàng nhưng nó sẽ không biết lấy theo tên nào trong cùng 1 group vì nó quá nhiều tên khác nhau.</p>
<p>Điều đó có nghĩa khi bạn truy vấn như sau sẽ bị báo lỗi:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Error Code: 1055. Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column &#39;posts.id&#39; </span><br><span class="line">which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode&#x3D;only_full_group_by</span><br></pre></td></tr></table></figure><br><strong>Chế độ này được mặc định bật kể từ MySQL 5.7</strong>, giúp truy vấn của bạn chính xác hơn, và tốt hơn hết bạn cũng nên bật nó nếu chưa bật.</p>
<p>Túm cái váy lại, <strong>cú pháp chuẩn</strong> của <code>GROUP BY</code> là khi <code>SELECT</code>, <code>ORDER BY</code>, <code>HAVING</code> thì các cột cần được trong <code>GROUP BY</code> hoặc các hàm để xác định cột duy nhất, do vậy chúng ta nên tuân theo.<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">Select, having, order by các cột trong GROUP BY cần phải thỏa mãn 1 trong 2 điều kiện</span></span><br><span class="line"><span class="comment">- Các cột được GROUP BY</span></span><br><span class="line"><span class="comment">- Các cột trong các hàm &quot;gộp dữ liệu&quot; thành 1 dữ liệu duy nhất: COUNT, MAX, MIN, SUM, AVG</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(CustomerID), Country</span><br><span class="line"><span class="keyword">FROM</span> Customers</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> Country</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="built_in">COUNT</span>(CustomerID) <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure></p>
<h1 id="CREATE-OR-UPDATE-1-ban-ghi"><a href="#CREATE-OR-UPDATE-1-ban-ghi" class="headerlink" title="CREATE OR UPDATE 1 bản ghi"></a>CREATE OR UPDATE 1 bản ghi</h1><p>Nếu bạn muốn tạo 1 bản ghi khi khóa chưa tồn tại hoặc cập nhật nó nếu khóa đã tồn tại, bạn có thể sử dụng<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT ... ON DUPLICATE KEY UPDATE Statement</span><br></pre></td></tr></table></figure><br>Ref:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/insert-on-duplicate.html">https://dev.mysql.com/doc/refman/5.7/en/insert-on-duplicate.html</a></li>
<li><a target="_blank" rel="noopener" href="https://www.mysqltutorial.org/mysql-insert-or-update-on-duplicate-key-update/">https://www.mysqltutorial.org/mysql-insert-or-update-on-duplicate-key-update/</a></li>
</ul>
<p>Ví dụ:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> </span><br><span class="line">   devices(name) </span><br><span class="line"><span class="keyword">VALUES</span> </span><br><span class="line">   (<span class="string">&#x27;Printer&#x27;</span>) </span><br><span class="line"><span class="keyword">ON</span> DUPLICATE KEY <span class="keyword">UPDATE</span> name <span class="operator">=</span> <span class="string">&#x27;Printer&#x27;</span>;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t1 (a,b,c) <span class="keyword">VALUES</span> (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>),(<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>)</span><br><span class="line">  <span class="keyword">ON</span> DUPLICATE KEY <span class="keyword">UPDATE</span> c<span class="operator">=</span><span class="keyword">VALUES</span>(a)<span class="operator">+</span><span class="keyword">VALUES</span>(b);</span><br></pre></td></tr></table></figure>
<h1 id="UPDATE-nhieu-ban-ghi-cung-1-luc-voi-key-khac-nhau"><a href="#UPDATE-nhieu-ban-ghi-cung-1-luc-voi-key-khac-nhau" class="headerlink" title="UPDATE nhiều bản ghi cùng 1 lúc với key khác nhau"></a>UPDATE nhiều bản ghi cùng 1 lúc với key khác nhau</h1><p>Thông thường khi update 10 users với id khác nhau, chúng ta sẽ nghĩ ngay đến việc chạy 10 câu lệnh <code>UPDATE</code><br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> Customers</span><br><span class="line"><span class="keyword">SET</span> ContactName <span class="operator">=</span> <span class="string">&#x27;Alfred Schmidt&#x27;</span>, City<span class="operator">=</span> <span class="string">&#x27;Frankfurt&#x27;</span></span><br><span class="line"><span class="keyword">WHERE</span> CustomerID <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure><br>Chúng ta thấy câu lệnh này chỉ có thể cập nhật 1 bản ghi với điều kiện ID 1 lúc. Hmm, vậy liệu có cách nào thực hiện 1 câu lệnh mà cập nhật được 10 bản ghi.</p>
<p>Câu trả lời là có, bạn có thể sử dụng WHEN và CASE để làm việc này:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> config </span><br><span class="line"><span class="keyword">SET</span> </span><br><span class="line">    config_value <span class="operator">=</span> <span class="keyword">CASE</span> config_name</span><br><span class="line">        <span class="keyword">WHEN</span> <span class="string">&#x27;name1&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;value&#x27;</span></span><br><span class="line">        <span class="keyword">WHEN</span> <span class="string">&#x27;name2&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;value2&#x27;</span></span><br><span class="line">        <span class="keyword">ELSE</span> config_value</span><br><span class="line">    <span class="keyword">END</span></span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">    config_name <span class="keyword">IN</span> (<span class="string">&#x27;name1&#x27;</span> , <span class="string">&#x27;name2&#x27;</span>);</span><br></pre></td></tr></table></figure><br>Trong Laravel, bạn có thể cụ thể hóa nó bởi hàm sau<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">updateValues</span>(<span class="params"><span class="keyword">array</span> <span class="variable">$values</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$table</span> = MyModel::getModel()-&gt;getTable();</span><br><span class="line"></span><br><span class="line">    <span class="variable">$cases</span> = [];</span><br><span class="line">    <span class="variable">$ids</span> = [];</span><br><span class="line">    <span class="variable">$params</span> = [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">foreach</span> (<span class="variable">$values</span> <span class="keyword">as</span> <span class="variable">$id</span> =&gt; <span class="variable">$value</span>) &#123;</span><br><span class="line">        <span class="variable">$id</span> = (<span class="keyword">int</span>) <span class="variable">$id</span>;</span><br><span class="line">        <span class="variable">$cases</span>[] = <span class="string">&quot;WHEN <span class="subst">&#123;$id&#125;</span> then ?&quot;</span>;</span><br><span class="line">        <span class="variable">$params</span>[] = <span class="variable">$value</span>;</span><br><span class="line">        <span class="variable">$ids</span>[] = <span class="variable">$id</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable">$ids</span> = implode(<span class="string">&#x27;,&#x27;</span>, <span class="variable">$ids</span>);</span><br><span class="line">    <span class="variable">$cases</span> = implode(<span class="string">&#x27; &#x27;</span>, <span class="variable">$cases</span>);</span><br><span class="line">    <span class="variable">$params</span>[] = Carbon::now();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> \DB::update(<span class="string">&quot;UPDATE `<span class="subst">&#123;$table&#125;</span>` SET `value` = CASE `id` <span class="subst">&#123;$cases&#125;</span> END, `updated_at` = ? WHERE `id` in (<span class="subst">&#123;$ids&#125;</span>)&quot;</span>, <span class="variable">$params</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>Hoặc cài <a target="_blank" rel="noopener" href="https://github.com/laravel/ideas/issues/575#issuecomment-334985153">package</a></p>
<p>Ref: <a target="_blank" rel="noopener" href="https://github.com/laravel/ideas/issues/575#issuecomment-300731748">https://github.com/laravel/ideas/issues/575#issuecomment-300731748</a></p>
<p>Vậy khi tôi update 1k bản ghi hay 1M bản ghi, tôi cũng có thể sử dụng lệnh này. Câu trả lời là không. Câu truy vấn là một phần dữ liệu được truyền lại giữa client và máy chủ SQL, và lượng dữ liệu này được giới hạn bởi tham số max_allowed_packet trong config. Nếu bạn sử dụng 1M bản ghi, độ dài câu truy vấn trên rõ ràng rất nhiều dẫn đến lượng dữ liệu truyền giữa client và máy chủ SQL tăng vượt quá max_allowed_packet, kết quả truy vấn sẽ là quang tèo.</p>
<p>Thôi thì ta cứ cập nhật 10 hoặc 100 bản ghi 1 lúc thôi, nhiều hơn thì ta lại chia ra để update nhiều lần vậy :D</p>
<h1 id="Dieu-chinh-config-mysql"><a href="#Dieu-chinh-config-mysql" class="headerlink" title="Điều chỉnh config mysql"></a>Điều chỉnh config mysql</h1><p>Để điều chỉnh config MySQL như set các mode, điều chỉnh các tham số, bạn có thể cd vào thư mục <code>/etc</code><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/mysql</span><br><span class="line">vi mysql.cnf</span><br></pre></td></tr></table></figure><br>Thư mục này chính là các cấu hình của MySQL. Mở nó ra xem có gì nào:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#</span><br><span class="line"># The MySQL database server configuration file.</span><br><span class="line">#</span><br><span class="line"># You can copy this to one of:</span><br><span class="line"># - &quot;&#x2F;etc&#x2F;mysql&#x2F;my.cnf&quot; to set global options,</span><br><span class="line"># - &quot;~&#x2F;.my.cnf&quot; to set user-specific options.</span><br><span class="line"># </span><br><span class="line"># One can use all long options that the program supports.</span><br><span class="line"># Run program with --help to get a list of available options and with</span><br><span class="line"># --print-defaults to see which it would actually understand and use.</span><br><span class="line">#</span><br><span class="line"># For explanations see</span><br><span class="line"># http:&#x2F;&#x2F;dev.mysql.com&#x2F;doc&#x2F;mysql&#x2F;en&#x2F;server-system-variables.html</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># * IMPORTANT: Additional settings that can override those from this file!</span><br><span class="line">#   The files must end with &#39;.cnf&#39;, otherwise they&#39;ll be ignored.</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">!includedir &#x2F;etc&#x2F;mysql&#x2F;conf.d&#x2F;</span><br><span class="line">!includedir &#x2F;etc&#x2F;mysql&#x2F;mysql.conf.d&#x2F;</span><br></pre></td></tr></table></figure><br>Phần comment giới thiệu khá chi tiết nhỉ =)). Phần <code>includedir</code> là đường dẫn thư mục con cấu hình. Di chuyển vào đó và thay đổi các cấu hình bạn muốn thôi:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi mysql.conf.d&#x2F;mysqld.cnf</span><br></pre></td></tr></table></figure></p>
<p>Nếu không thích điều chỉnh trực tiếp vào file config, bạn cũng có thể điều chỉnh qua phiên làm việc thôi, bằng cách sử dụng các hàm trong SQL</p>
<p>Ví dụ sau là điều chỉnh mode nè<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Xem các mode trong SQL */</span></span><br><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@GLOBAL</span>.sql_mode;</span><br><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@SESSION</span>.sql_mode;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Điều chỉnh các mode trong SQL */</span></span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">GLOBAL</span> sql_mode <span class="operator">=</span> <span class="string">&#x27;modes&#x27;</span>;</span><br><span class="line"><span class="keyword">SET</span> SESSION sql_mode <span class="operator">=</span> <span class="string">&#x27;modes&#x27;</span>;</span><br></pre></td></tr></table></figure></p>
<h1 id="Lay-N-ban-ghi-moi-nhom-khi-su-dung-GROUP-BY"><a href="#Lay-N-ban-ghi-moi-nhom-khi-su-dung-GROUP-BY" class="headerlink" title="Lấy N bản ghi mỗi nhóm khi sử dụng GROUP BY"></a><a target="_blank" rel="noopener" href="https://dba.stackexchange.com/questions/198697/how-to-get-latest-2-records-of-each-group">Lấy N bản ghi mỗi nhóm khi sử dụng GROUP BY</a></h1><p>Với SQL 8+, đã hỗ trợ DENSE_RANK</p>
<p>Với SQL 8- bạn có thể sử dụng SET biến<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> <span class="variable">@rnk</span><span class="operator">=</span><span class="number">0</span>; <span class="keyword">SET</span> <span class="variable">@rank</span><span class="operator">=</span><span class="number">0</span>; <span class="keyword">SET</span> <span class="variable">@curscore</span><span class="operator">=</span><span class="number">0</span>;</span><br><span class="line"><span class="keyword">SELECT</span> score,ID,rank <span class="keyword">FROM</span></span><br><span class="line">(</span><br><span class="line">    <span class="keyword">SELECT</span> AA.<span class="operator">*</span>,BB.ID,</span><br><span class="line">    (<span class="variable">@rnk</span>:<span class="operator">=</span><span class="variable">@rnk</span><span class="operator">+</span><span class="number">1</span>) rnk,</span><br><span class="line">    (<span class="variable">@rank</span>:<span class="operator">=</span>IF(<span class="variable">@curscore</span><span class="operator">=</span>score,<span class="variable">@rank</span>,<span class="variable">@rnk</span>)) rank,</span><br><span class="line">    (<span class="variable">@curscore</span>:<span class="operator">=</span>score) newscore</span><br><span class="line">    <span class="keyword">FROM</span></span><br><span class="line">    (</span><br><span class="line">        <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span></span><br><span class="line">        (<span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="number">1</span>) scorecount,score</span><br><span class="line">        <span class="keyword">FROM</span> scores <span class="keyword">GROUP</span> <span class="keyword">BY</span> score</span><br><span class="line">    ) AAA</span><br><span class="line">    <span class="keyword">ORDER</span> <span class="keyword">BY</span> score <span class="keyword">DESC</span></span><br><span class="line">) AA <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> scores BB <span class="keyword">USING</span> (score)) A;</span><br></pre></td></tr></table></figure></p>
<p>Chi tiết: <a target="_blank" rel="noopener" href="https://dba.stackexchange.com/a/198699">https://dba.stackexchange.com/a/198699</a></p>
<h1 id="Nguon-tham-khao"><a href="#Nguon-tham-khao" class="headerlink" title="Nguồn tham khảo"></a>Nguồn tham khảo</h1><ul>
<li>Đồng đội …..</li>
</ul>
</div><div class="article-licensing box"><div class="licensing-title"><p>[SQL] Note 1: GROUP BY, create-update multiple records, Config MySQL</p><p><a href="http://yoursite.com/2020/04/03/SQL-Note-1-GROUP-BY-create-update-multiple-records-Config-MySQL/">http://yoursite.com/2020/04/03/SQL-Note-1-GROUP-BY-create-update-multiple-records-Config-MySQL/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>Ming</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2020-04-03</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2022-07-24</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/mysql/">mysql</a></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><div class="social-share"></div><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button donate" href="https://www.buymeacoffee.com/mingnv" target="_blank" rel="noopener" data-type="buymeacoffee"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>Buy me a coffee</span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2020/04/06/PHPCS-and-PHPC-Fixer/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">PHPCS and PHP-CS-Fixer</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/04/02/Laravel-Event-Notification/"><span class="level-item">[Laravel] Event vs Notification</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'http://yoursite.com/2020/04/03/SQL-Note-1-GROUP-BY-create-update-multiple-records-Config-MySQL/';
            this.page.identifier = '2020/04/03/SQL-Note-1-GROUP-BY-create-update-multiple-records-Config-MySQL/';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'minh' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="https://octodex.github.com/images/spidertocat.png" alt="Minh NV"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Minh NV</p><p class="is-size-6 is-block">_N.V.M_</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Hanoi city, Vietnam</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">154</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">35</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">48</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/minhnv2306" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/minhnv2306"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://www.facebook.com/profile.php?id=100003860456359"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="http://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="http://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/AWS-Developer-Associate/"><span class="level-start"><span class="level-item">AWS Developer Associate</span></span><span class="level-end"><span class="level-item tag">19</span></span></a></li><li><a class="level is-mobile" href="/categories/AWS-Practitioner/"><span class="level-start"><span class="level-item">AWS Practitioner</span></span><span class="level-end"><span class="level-item tag">26</span></span></a></li><li><a class="level is-mobile" href="/categories/AWS-Training/"><span class="level-start"><span class="level-item">AWS Training</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/Authentication/"><span class="level-start"><span class="level-item">Authentication</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Clean-our-code/"><span class="level-start"><span class="level-item">Clean our code</span></span><span class="level-end"><span class="level-item tag">13</span></span></a><ul><li><a class="level is-mobile" href="/categories/Clean-our-code/Clean-code-Robert-C-Martin/"><span class="level-start"><span class="level-item">Clean code - Robert C. Martin</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/Clean-our-code/Refactoring-to-Collections/"><span class="level-start"><span class="level-item">Refactoring to Collections</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Database/"><span class="level-start"><span class="level-item">Database</span></span><span class="level-end"><span class="level-item tag">3</span></span></a><ul><li><a class="level is-mobile" href="/categories/Database/MongoDB/"><span class="level-start"><span class="level-item">MongoDB</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Database/MySQL/"><span class="level-start"><span class="level-item">MySQL</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Development-and-Operation/"><span class="level-start"><span class="level-item">Development and Operation</span></span><span class="level-end"><span class="level-item tag">33</span></span></a><ul><li><a class="level is-mobile" href="/categories/Development-and-Operation/CircleCI-2-0/"><span class="level-start"><span class="level-item">CircleCI 2.0</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/Development-and-Operation/Docker/"><span class="level-start"><span class="level-item">Docker</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/categories/Development-and-Operation/Google-Cloud-Platform/"><span class="level-start"><span class="level-item">Google Cloud Platform</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Development-and-Operation/Laravel/"><span class="level-start"><span class="level-item">Laravel</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/categories/Development-and-Operation/Linux-OS/"><span class="level-start"><span class="level-item">Linux OS</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/Development-and-Operation/Web-Server/"><span class="level-start"><span class="level-item">Web Server</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/JAVaScript/"><span class="level-start"><span class="level-item">JAVaScript</span></span><span class="level-end"><span class="level-item tag">7</span></span></a><ul><li><a class="level is-mobile" href="/categories/JAVaScript/Asynchronous/"><span class="level-start"><span class="level-item">Asynchronous</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/JAVaScript/Event/"><span class="level-start"><span class="level-item">Event</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/JAVaScript/React/"><span class="level-start"><span class="level-item">React</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/JP/"><span class="level-start"><span class="level-item">JP</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/Others/"><span class="level-start"><span class="level-item">Others</span></span><span class="level-end"><span class="level-item tag">15</span></span></a><ul><li><a class="level is-mobile" href="/categories/Others/Cong-cu-lap-trinh/"><span class="level-start"><span class="level-item">Công cụ lập trình</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Others/PHPCS/"><span class="level-start"><span class="level-item">PHPCS</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Others/Suu-tam/"><span class="level-start"><span class="level-item">Sưu tầm</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Others/Website-Optimization/"><span class="level-start"><span class="level-item">Website Optimization</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Special-day/"><span class="level-start"><span class="level-item">Special day</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/The-Art-of-Readable-Code/"><span class="level-start"><span class="level-item">The Art of Readable Code</span></span><span class="level-end"><span class="level-item tag">19</span></span></a><ul><li><a class="level is-mobile" href="/categories/The-Art-of-Readable-Code/Chapter-1-Code-Should-Be-Easy-to-Understand/"><span class="level-start"><span class="level-item">Chapter 1 - Code Should Be Easy to Understand</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/The-Art-of-Readable-Code/Part-I-Surface-Level-Improvements/"><span class="level-start"><span class="level-item">Part I - Surface-Level Improvements</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/The-Art-of-Readable-Code/Part-II-Simplifying-Loops-and-Logic/"><span class="level-start"><span class="level-item">Part II - Simplifying Loops and Logic</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/The-Art-of-Readable-Code/Part-III-Reorganizing-Your-Code/"><span class="level-start"><span class="level-item">Part III - Reorganizing Your Code</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/The-Art-of-Readable-Code/Part-IV-Selected-Topics/"><span class="level-start"><span class="level-item">Part IV - Selected Topics</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Unit-Test/"><span class="level-start"><span class="level-item">Unit Test</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/API/"><span class="tag">API</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CI-CD/"><span class="tag">CI/CD</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Kanji/"><span class="tag">Kanji</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux-command-line/"><span class="tag">Linux command line</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/apache2/"><span class="tag">apache2</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/async-programing/"><span class="tag">async programing</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/authentication/"><span class="tag">authentication</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/aws-exam-preparation/"><span class="tag">aws exam preparation</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/aws-labs/"><span class="tag">aws labs</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/aws-certificate/"><span class="tag">aws-certificate</span><span class="tag">44</span></a></div><div class="control"><a class="tags has-addons" href="/tags/clean-comment/"><span class="tag">clean comment</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/clean-error/"><span class="tag">clean error</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/clean-function/"><span class="tag">clean function</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/collection/"><span class="tag">collection</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/configuration/"><span class="tag">configuration</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker/"><span class="tag">docker</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker-command/"><span class="tag">docker command</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker-compose-file-format/"><span class="tag">docker compose file format</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker-best-practice/"><span class="tag">docker-best-practice</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker-compose-yml/"><span class="tag">docker-compose.yml</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker-instructions-docker-best-practice/"><span class="tag">docker-instructions docker-best-practice</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker-network/"><span class="tag">docker-network</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker-volume/"><span class="tag">docker-volume</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/event/"><span class="tag">event</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/event-notification/"><span class="tag">event notification</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/excelfile/"><span class="tag">excelfile</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/gcp/"><span class="tag">gcp</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/git/"><span class="tag">git</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jquery-validation/"><span class="tag">jquery-validation</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/kubernetes/"><span class="tag">kubernetes</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mongoDB/"><span class="tag">mongoDB</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mysql/"><span class="tag">mysql</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/naming/"><span class="tag">naming</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/note-choi-choi/"><span class="tag">note choi choi</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/phpcs/"><span class="tag">phpcs</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/phpcs-phpcsfixer/"><span class="tag">phpcs phpcsfixer</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/process-management/"><span class="tag">process management</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/react-boilerplate/"><span class="tag">react boilerplate</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/regex/"><span class="tag">regex</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/requests/"><span class="tag">requests</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/stripe/"><span class="tag">stripe</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sudo-command/"><span class="tag">sudo command</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tips-laravel/"><span class="tag">tips laravel</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tracking-php-script/"><span class="tag">tracking php script</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/unit-test/"><span class="tag">unit test</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/validation/"><span class="tag">validation</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vba/"><span class="tag">vba</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vim/"><span class="tag">vim</span><span class="tag">1</span></a></div></div></div></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2022/07/"><span class="level-start"><span class="level-item">July 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/06/"><span class="level-start"><span class="level-item">June 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/02/"><span class="level-start"><span class="level-item">February 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/01/"><span class="level-start"><span class="level-item">January 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/12/"><span class="level-start"><span class="level-item">December 2021</span></span><span class="level-end"><span class="level-item tag">21</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/08/"><span class="level-start"><span class="level-item">August 2021</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/07/"><span class="level-start"><span class="level-item">July 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/06/"><span class="level-start"><span class="level-item">June 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/05/"><span class="level-start"><span class="level-item">May 2021</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/04/"><span class="level-start"><span class="level-item">April 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/02/"><span class="level-start"><span class="level-item">February 2021</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/01/"><span class="level-start"><span class="level-item">January 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/06/"><span class="level-start"><span class="level-item">June 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/05/"><span class="level-start"><span class="level-item">May 2020</span></span><span class="level-end"><span class="level-item tag">23</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/04/"><span class="level-start"><span class="level-item">April 2020</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/02/"><span class="level-start"><span class="level-item">February 2020</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/01/"><span class="level-start"><span class="level-item">January 2020</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/12/"><span class="level-start"><span class="level-item">December 2019</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/11/"><span class="level-start"><span class="level-item">November 2019</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/09/"><span class="level-start"><span class="level-item">September 2019</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/07/"><span class="level-start"><span class="level-item">July 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/04/"><span class="level-start"><span class="level-item">April 2019</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li></ul></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe for updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="level is-mobile" href="#GROUP-BY…"><span class="level-left"><span class="level-item">1</span><span class="level-item">GROUP BY….</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Cu-phap"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">Cú pháp</span></span></a></li><li><a class="level is-mobile" href="#ONLY-FULL-GROUP-BY-mode"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">ONLY_FULL_GROUP_BY mode</span></span></a></li></ul></li><li><a class="level is-mobile" href="#CREATE-OR-UPDATE-1-ban-ghi"><span class="level-left"><span class="level-item">2</span><span class="level-item">CREATE OR UPDATE 1 bản ghi</span></span></a></li><li><a class="level is-mobile" href="#UPDATE-nhieu-ban-ghi-cung-1-luc-voi-key-khac-nhau"><span class="level-left"><span class="level-item">3</span><span class="level-item">UPDATE nhiều bản ghi cùng 1 lúc với key khác nhau</span></span></a></li><li><a class="level is-mobile" href="#Dieu-chinh-config-mysql"><span class="level-left"><span class="level-item">4</span><span class="level-item">Điều chỉnh config mysql</span></span></a></li><li><a class="level is-mobile" href="#Lay-N-ban-ghi-moi-nhom-khi-su-dung-GROUP-BY"><span class="level-left"><span class="level-item">5</span><span class="level-item">Lấy N bản ghi mỗi nhóm khi sử dụng GROUP BY</span></span></a></li><li><a class="level is-mobile" href="#Nguon-tham-khao"><span class="level-left"><span class="level-item">6</span><span class="level-item">Nguồn tham khảo</span></span></a></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-07-24T15:00:13.000Z">2022-07-24</time></p><p class="title"><a href="/2022/07/24/React-My-Experience/">React: My Experience</a></p><p class="categories"><a href="/categories/JAVaScript/">JAVaScript</a> / <a href="/categories/JAVaScript/React/">React</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-07-16T15:47:58.000Z">2022-07-16</time></p><p class="title"><a href="/2022/07/16/JMeter-CSRF-Token-Website-Login-Authorization/">JMeter CSRF Token Website Login | Authorization</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-06-19T02:36:32.000Z">2022-06-19</time></p><p class="title"><a href="/2022/06/19/Nhat-ky-15-03-22-15-06-22/">Nhật ký 15/03/22-15/06/22</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-02-04T13:58:29.000Z">2022-02-04</time></p><p class="title"><a href="/2022/02/04/Backend-Note/">Backend Note</a></p><p class="categories"><a href="/categories/Others/">Others</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-01-09T13:55:17.000Z">2022-01-09</time></p><p class="title"><a href="/2022/01/09/AWS-Developer-Associate-Summary/">[AWS Developer Associate] Summary</a></p><p class="categories"><a href="/categories/AWS-Developer-Associate/">AWS Developer Associate</a></p></div></article></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://blog.zhangruipeng.me/hexo-theme-icarus/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Icarus blog</span></span><span class="level-right"><span class="level-item tag">blog.zhangruipeng.me</span></span></a></li><li><a class="level is-mobile" href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Icarus github</span></span><span class="level-right"><span class="level-item tag">github.com</span></span></a></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="https://octodex.github.com/images/privateinvestocat.jpg" alt="Hello, I am Minh" height="28"></a><p class="is-size-7"><span>&copy; 2022 Ming</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">Visited by <span id="busuanzi_value_site_uv">0</span> users</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>