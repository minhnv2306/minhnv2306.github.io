<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>[Web Server] Apache Notes - Hello, I am Minh</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Hello, I am Minh"><meta name="msapplication-TileImage" content="/img/my_favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Hello, I am Minh"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="Bài viết tổng hợp 1 vài note giúp mình thao tác Apache tốt hơn vào 1 ngày tìm lại được 2&amp;#x2F;3 đôi dép bị thất lạc"><meta property="og:type" content="blog"><meta property="og:title" content="[Web Server] Apache Notes"><meta property="og:url" content="http://yoursite.com/2019/11/21/Web-Server-Apache-Note/"><meta property="og:site_name" content="Hello, I am Minh"><meta property="og:description" content="Bài viết tổng hợp 1 vài note giúp mình thao tác Apache tốt hơn vào 1 ngày tìm lại được 2&amp;#x2F;3 đôi dép bị thất lạc"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://1.bp.blogspot.com/-T3Q7x6_Iwoc/USE-UyhN2YI/AAAAAAAAA5U/D6USUhYOq68/s1600/apache2.png"><meta property="article:published_time" content="2019-11-21T16:18:07.000Z"><meta property="article:modified_time" content="2021-04-10T00:07:10.630Z"><meta property="article:author" content="Ming"><meta property="article:tag" content="apache2"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="http://1.bp.blogspot.com/-T3Q7x6_Iwoc/USE-UyhN2YI/AAAAAAAAA5U/D6USUhYOq68/s1600/apache2.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://yoursite.com/2019/11/21/Web-Server-Apache-Note/"},"headline":"[Web Server] Apache Notes","image":["http://1.bp.blogspot.com/-T3Q7x6_Iwoc/USE-UyhN2YI/AAAAAAAAA5U/D6USUhYOq68/s1600/apache2.png"],"datePublished":"2019-11-21T16:18:07.000Z","dateModified":"2021-04-10T00:07:10.630Z","author":{"@type":"Person","name":"Ming"},"description":"Bài viết tổng hợp 1 vài note giúp mình thao tác Apache tốt hơn vào 1 ngày tìm lại được 2&#x2F;3 đôi dép bị thất lạc"}</script><link rel="canonical" href="http://yoursite.com/2019/11/21/Web-Server-Apache-Note/"><link rel="icon" href="/img/my_favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-112002191-2" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-112002191-2');</script><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.png" alt="Hello, I am Minh" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="http://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2019-11-21T16:18:07.000Z" title="11/21/2019, 11:18:07 PM">2019-11-21</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-04-10T00:07:10.630Z" title="4/10/2021, 7:07:10 AM">2021-04-10</time></span><span class="level-item"><a class="link-muted" href="/categories/Development-and-Operation/">Development and Operation</a><span> / </span><a class="link-muted" href="/categories/Development-and-Operation/Web-Server/">Web Server</a></span><span class="level-item">22 minutes read (About 3231 words)</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>&nbsp;visits</span></div></div><h1 class="title is-3 is-size-4-mobile">[Web Server] Apache Notes</h1><div class="content"><p>Bài viết tổng hợp 1 vài note giúp mình thao tác Apache tốt hơn vào 1 ngày tìm lại được 2/3 đôi dép bị thất lạc<br><span id="more"></span></p>
<h1 id="Tong-quan"><a href="#Tong-quan" class="headerlink" title="Tổng quan"></a>Tổng quan</h1><h2 id="Docs-chinh"><a href="#Docs-chinh" class="headerlink" title="Docs chính"></a>Docs chính</h2><p><a target="_blank" rel="noopener" href="https://httpd.apache.org/docs/2.4/">https://httpd.apache.org/docs/2.4/</a></p>
<h2 id="Apache2-quan-ly-3-thu-quan-trong"><a href="#Apache2-quan-ly-3-thu-quan-trong" class="headerlink" title="Apache2 quản lý 3 thứ quan trọng"></a>Apache2 quản lý 3 thứ quan trọng</h2><ul>
<li><code>sites</code>: quản lý các Virtual Hosts</li>
<li><code>conf</code>: configuration</li>
<li><code>mods</code>: modules</li>
</ul>
<p>Ứng với các thư mục <code>conf-available</code>, <code>mods-availble</code>, <code>sites-available</code>. Để bật tắt các site, conf, mods sử dụng lệnh<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo a2enconf&#x2F;a2disconf [conf_name]</span><br><span class="line">$ sudo a2enmod&#x2F;a2dismod [mod_name]</span><br><span class="line">$ sudo a2ensite&#x2F;a2dissite [virtual_host_site]</span><br></pre></td></tr></table></figure></p>
<h2 id="Server-Logs"><a href="#Server-Logs" class="headerlink" title="Server Logs"></a>Server Logs</h2><p>Logs trong apache2 mặc định được ghi tại</p>
<ul>
<li><code>/var/log/apache2/access.log</code>: By default, every request to your web server is recorded in this log file unless Apache is configured to do otherwise.</li>
<li><code>/var/log/apache2/error.log</code>: By default, all errors are recorded in this file. The LogLevel directive in the Apache configuration specifies how much detail the error logs will contain.</li>
</ul>
<h2 id="Port-config"><a href="#Port-config" class="headerlink" title="Port config"></a>Port config</h2><p>Các cổng trong apache2 được cấu hình trong <code>/etc/apache2/ports.conf</code>. Mặc định, chỉ có 2 cổng được mở là 80 (dành cho các dịch vụ web http) vầ 443 (https). Bạn có thể mở thêm cổng (cái này dùng khi bạn muốn 1 domain triển khai nhiều projects khá hiệu quả - deploy lên staging chẳng hạn) bằng cách dùng thêm <code>Listen</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Listen 81</span><br><span class="line">Listen 82</span><br></pre></td></tr></table></figure><br>Sau đó bạn có thể sử dụng cổng này trong Virtual host đơn giản<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost 10.0.0.1:81&gt;</span><br><span class="line">    DocumentRoot &quot;&#x2F;www&#x2F;domain&quot;</span><br><span class="line">&lt;&#x2F;VirtualHost&gt;</span><br><span class="line">&lt;VirtualHost 10.0.0.1:82&gt;</span><br><span class="line">    DocumentRoot &quot;&#x2F;www&#x2F;other-domain&quot;</span><br><span class="line">&lt;&#x2F;VirtualHost&gt;</span><br></pre></td></tr></table></figure></p>
<h1 id="Mot-vai-modules-trong-Apache2"><a href="#Mot-vai-modules-trong-Apache2" class="headerlink" title="Một vài modules trong Apache2"></a>Một vài modules trong Apache2</h1><p>Tất cả các module trong Apache2 có thể tìm kiếm tại: <a target="_blank" rel="noopener" href="https://httpd.apache.org/docs/2.4/mod/">https://httpd.apache.org/docs/2.4/mod/</a></p>
<p>Một vài modules hay sử dụng:<br><a target="_blank" rel="noopener" href="https://www.digitalocean.com/community/tutorials/how-to-install-configure-and-use-modules-in-the-apache-web-server">https://www.digitalocean.com/community/tutorials/how-to-install-configure-and-use-modules-in-the-apache-web-server</a></p>
<h2 id="Rewrite-Module"><a href="#Rewrite-Module" class="headerlink" title="Rewrite Module"></a>Rewrite Module</h2><p>Một trong những modules hữu ích trong Apache. Module này cho phép bạn sinh ra url duy nhất và dễ dàng có thể đọc được với nội dung request trên server<br>Module này mặc định được cài trên Ubuntu khi Apache được cài đặt nhưng không được kích hoạt. Để bật nó bạn cần<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo a2enmod rewrite</span><br><span class="line">sudo service apache2 reload</span><br></pre></td></tr></table></figure><br>Nếu chế độ này bị disale, khi truy cập vào URL tự sinh sẽ gây lỗi 404</p>
<blockquote>
<p>Ngoài ra có 1 số module được sử dụng rất nhiều trong config cũng nên quan tâm</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://httpd.apache.org/docs/2.4/mod/mod_authz_core.html">mod_authz_core</a>: Các tham số liên quan đến xác thực người dùng (Require)</li>
<li><a target="_blank" rel="noopener" href="https://httpd.apache.org/docs/2.4/mod/mod_access_compat.html#allow">mod_access_compat</a>: điều khiển truy cập các host nào được truy cập vào server</li>
</ul>
</blockquote>
<h1 id="apacha2ctl-apachectl-command"><a href="#apacha2ctl-apachectl-command" class="headerlink" title="$apacha2ctl, $apachectl command"></a><code>$apacha2ctl</code>, <code>$apachectl</code> command</h1><p>Lệnh này coi như là font end của hệ thống Apache HTTP Server. Nó được thiết kế để giúp quản trị viên kiểm soát được các chức năng chạy ngầm của apache2</p>
<p>Kiểm tra các modules nào đang đang bật trên apache2<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ apache2ctl -t -D DUMP_MODULES   </span><br><span class="line">OR </span><br><span class="line">$ apache2ctl -M</span><br></pre></td></tr></table></figure><br>Xem các thông số server<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ apache2ctl -S</span><br></pre></td></tr></table></figure><br>Có các thông tin về các host nào, cổng và các tên host. Ngoài ra còn có thông tin về user và nhóm user bạn cần cấp quyền để truy cập vào ứng dụng của bạn<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">User: name&#x3D;&quot;www-data&quot; id&#x3D;33</span><br><span class="line">Group: name&#x3D;&quot;www-data&quot; id&#x3D;33</span><br></pre></td></tr></table></figure><br>và quyết định cấp quyền cho người dùng web-server vào thư mục của bạn<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo chown www-data:www-data -R storage</span><br><span class="line">sudo chown www-data:www-data -R bootstrap&#x2F;cache</span><br></pre></td></tr></table></figure></p>
<p>Các tùy chọn của <code>apache2ctl</code> command<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Usage: &#x2F;usr&#x2F;sbin&#x2F;apache2 [-D name] [-d directory] [-f file]</span><br><span class="line">                         [-C &quot;directive&quot;] [-c &quot;directive&quot;]</span><br><span class="line">                         [-k start|restart|graceful|graceful-stop|stop]</span><br><span class="line">                         [-v] [-V] [-h] [-l] [-L] [-t] [-T] [-S] [-X]</span><br><span class="line">Options:</span><br><span class="line">  -D name            : define a name for use in &lt;IfDefine name&gt; directives</span><br><span class="line">  -d directory       : specify an alternate initial ServerRoot</span><br><span class="line">  -f file            : specify an alternate ServerConfigFile</span><br><span class="line">  -C &quot;directive&quot;     : process directive before reading config files</span><br><span class="line">  -c &quot;directive&quot;     : process directive after reading config files</span><br><span class="line">  -e level           : show startup errors of level (see LogLevel)</span><br><span class="line">  -E file            : log startup errors to file</span><br><span class="line">  -v                 : show version number</span><br><span class="line">  -V                 : show compile settings</span><br><span class="line">  -h                 : list available command line options (this page)</span><br><span class="line">  -l                 : list compiled in modules</span><br><span class="line">  -L                 : list available configuration directives</span><br><span class="line">  -t -D DUMP_VHOSTS  : show parsed vhost settings</span><br><span class="line">  -t -D DUMP_RUN_CFG : show parsed run settings</span><br><span class="line">  -S                 : a synonym for -t -D DUMP_VHOSTS -D DUMP_RUN_CFG</span><br><span class="line">  -t -D DUMP_MODULES : show all loaded modules </span><br><span class="line">  -M                 : a synonym for -t -D DUMP_MODULES</span><br><span class="line">  -t                 : run syntax check for config files</span><br><span class="line">  -T                 : start without DocumentRoot(s) check</span><br><span class="line">  -X                 : debug mode (only one worker, do not detach)</span><br></pre></td></tr></table></figure></p>
<h1 id="Cau-hinh-virtual-host"><a href="#Cau-hinh-virtual-host" class="headerlink" title="Cấu hình virtual host"></a>Cấu hình virtual host</h1><p>Overview: <a target="_blank" rel="noopener" href="https://httpd.apache.org/docs/2.4/vhosts/">https://httpd.apache.org/docs/2.4/vhosts/</a></p>
<p>Các tham số có ý nghĩa gì thì có thể tra ở đây:<br><a target="_blank" rel="noopener" href="https://httpd.apache.org/docs/2.4/mod/core.html#directory">https://httpd.apache.org/docs/2.4/mod/core.html#directory</a></p>
<p>Đây là một file cấu hình virtual host cơ bản, chúng ta cùng tìm hiểu các tham số và ý nghĩa của nó nhé:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">    ServerAdmin admin@laravel-demo.local</span><br><span class="line">    DocumentRoot &#x2F;var&#x2F;www&#x2F;html&#x2F;laravel-demo&#x2F;public</span><br><span class="line">    ServerName laravel-demo.local</span><br><span class="line">    ServerAlias www.laravel-demo.local</span><br><span class="line">        &lt;Directory &#x2F;var&#x2F;www&#x2F;html&#x2F;laravel-demo&#x2F;public&gt;</span><br><span class="line">                AllowOverride All</span><br><span class="line">                Order allow,deny</span><br><span class="line">                Allow from all</span><br><span class="line">        &lt;&#x2F;Directory&gt;</span><br><span class="line">    ErrorLog $&#123;APACHE_LOG_DIR&#125;&#x2F;error.log</span><br><span class="line">    CustomLog $&#123;APACHE_LOG_DIR&#125;&#x2F;access.log combined</span><br><span class="line">&lt;&#x2F;VirtualHost&gt;</span><br></pre></td></tr></table></figure></p>
<h2 id="Cac-tham-so-co-ban"><a href="#Cac-tham-so-co-ban" class="headerlink" title="Các tham số cơ bản"></a>Các tham số cơ bản</h2><p><code>ServerAdmin</code>: địa chỉ emainl, cái mà server sẽ dùng khi gửi message lỗi tới client.</p>
<p><code>ServerName and ServerAlias</code><br>Trước khi tìm hiểu 2 tham số này có ý nghĩa gì, chúng ta hãy xem cách mà Apache xử lý khi nhận 1 request với virtual host nhé. Sẽ có 2 cách apache2 tìm kiếm 1 host là dựa vào Name-based or IP-based Virtual Hosts, và khi cấu hình chúng ta cũng làm như vậy.</p>
<p><strong>Name-based vs. IP-based Virtual Hosts</strong></p>
<ul>
<li>IP-based virtual hosts sử dụng địa chỉ IP để kết nối và xác định chính xác virtual host. Do đó bạn phải chia IP cho mỗi host<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost 10.0.0.1:80&gt;</span><br><span class="line">    DocumentRoot &quot;&#x2F;www&#x2F;domain&quot;</span><br><span class="line">&lt;&#x2F;VirtualHost&gt;</span><br><span class="line"></span><br><span class="line">&lt;VirtualHost 10.0.0.2:80&gt;</span><br><span class="line">    DocumentRoot &quot;&#x2F;www&#x2F;otherdomain&quot;</span><br><span class="line">&lt;&#x2F;VirtualHost&gt;</span><br></pre></td></tr></table></figure>
Như ví dụ trên bạn thấy các host đang được chia theo địa chỉ IP. Apache sẽ duyệt và virtual host nào  trùng địa chỉ IP và cổng thì sẽ tiến hành chọn virtual host đó xử lý request. Hạn chế cách này như đã nói ở trên, mỗi host cần có 1 địa chỉ IP riêng</li>
<li>Với name-based virtual hosting, server sẽ dựa vào phía client để báo lên hostname như 1 phần của HTTP headers. Sử dụng kỹ thuật này, <strong>rất nhiều hosts có thể dùng chung địa chỉ IP</strong></li>
<li>Khi có yêu cầu đến, máy chủ sẽ tìm thấy đối số <code>&lt;Virtualhost&gt;</code> phù hợp nhất (cụ thể nhất) dựa trên địa chỉ IP và cổng được sử dụng bởi yêu cầu. </li>
<li>Nếu có nhiều hơn một máy chủ ảo chứa kết hợp cổng và địa chỉ phù hợp nhất này, Apache sẽ so sánh thêm các chỉ thị <code>ServerName</code> và <code>ServerAlias</code> với tên máy chủ có trong yêu cầu.</li>
<li>Trong trường hợp không gán ServerName khi có nhiều hosts sử dụng chung địa chỉ IP và cổng, server sẽ gán cho nó 1 tên mặc định. </li>
<li>Tên này có thể dẫn đến việc kết hợp với virtual host lỗi, do đó không được khuyến khích. Tốt nhất là bạn nên tự đặt tên ServerNam cho server của mình.</li>
</ul>
<p><strong>Using Name-based Virtual Hosts</strong></p>
<p>Ví dụ, bạn đang có server với domain <a target="_blank" rel="noopener" href="http://www.example.com">www.example.com</a> và bạn muốn thêm 1 virtual host với other.example.com, với 2 hosts đều trỏ tới cùng 1 địa chỉ IP.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">    # This first-listed virtual host is also the default for *:80</span><br><span class="line">    ServerName www.example.com</span><br><span class="line">    ServerAlias example.com </span><br><span class="line">    DocumentRoot &quot;&#x2F;www&#x2F;domain&quot;</span><br><span class="line">&lt;&#x2F;VirtualHost&gt;</span><br><span class="line"></span><br><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">    ServerName other.example.com</span><br><span class="line">    DocumentRoot &quot;&#x2F;www&#x2F;otherdomain&quot;</span><br><span class="line">&lt;&#x2F;VirtualHost&gt;</span><br></pre></td></tr></table></figure><br>Mỗi servers muốn có thể được truy cập bằng nhiều tên. Điều đó hoàn toàn có thể với <code>ServerAlias</code> directive, đặt bên trong <code>&lt;VirtualHost&gt;</code> section. Ví dụ: trong khối <code>&lt;Virtualhost&gt;</code> đầu tiên ở trên, chỉ thị <code>ServerAlias</code> chỉ ra rằng các tên được liệt kê là các tên khác mà mọi người có thể sử dụng để xem cùng một trang web:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ServerAlias example.com *.example.com</span><br></pre></td></tr></table></figure><br>và sau đó request từ tất cả các host example.com domain sẽ được xử lý bởi <a target="_blank" rel="noopener" href="http://www.example.com">www.example.com</a> virtual host. Các ký tự đại diện * và? có thể được sử dụng để khớp tên.</p>
<p>Các Name-based virtual hosts cho bộ <code>&lt;Virtualhost&gt;</code> phù hợp nhất được xử lý theo thứ tự chúng xuất hiện trong cấu hình. <code>ServerName</code> hoặc <code>ServerAlias</code> phù hợp đầu tiên được sử dụng, không có quyền ưu tiên khác nhau cho các ký tự đại diện (cũng như cho <code>ServerName</code> so với <code>ServerAlias</code>).</p>
<h2 id="Cac-tham-so-sub-directories"><a href="#Cac-tham-so-sub-directories" class="headerlink" title="Các tham số sub-directories"></a>Các tham số sub-directories</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">AllowOverride All</span><br><span class="line">Order allow,deny</span><br><span class="line">Allow from all</span><br></pre></td></tr></table></figure>
<p>Các tham số <code>Allow</code>, <code>Deny</code>, <code>Order</code> đều nằm trong <a target="_blank" rel="noopener" href="https://httpd.apache.org/docs/2.4/mod/mod_access_compat.html#allow">mod_access_compat</a>, thêm đó còn có tham số <code>Satisfy</code> dùng khi có 1 số vùng cần hạn chế người dùng truy cập</p>
<h3 id="AllowOverride"><a href="#AllowOverride" class="headerlink" title="AllowOverride"></a><code>AllowOverride</code></h3><p>Loại đường dẫn cho phép <code>.htaccess</code> files (trả lời câu hỏi: apache2 load file <code>.htaccess</code> ở đâu?)</p>
<p>Cú pháp<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">AllowOverride All|None|directive-type [directive-type] ...</span><br><span class="line"></span><br><span class="line">Với các giá trị</span><br><span class="line">    None: .htaccess file sẽ bị ignore. Trong trường hợp này, server sẽ thậm chí không đọc được</span><br><span class="line">    All: file.htaccess ở đâu cũng được</span><br></pre></td></tr></table></figure></p>
<h3 id="Allow-from"><a href="#Allow-from" class="headerlink" title="Allow from"></a><code>Allow from</code></h3><p>Tham số này xác định hosts nào có thể truy cập vào khu vực trên server</p>
<h3 id="Deny-from"><a href="#Deny-from" class="headerlink" title="Deny from"></a><code>Deny from</code></h3><p>Ý nghĩa ngược lại với allow (Allow và deny có thể lấy từ config)</p>
<h3 id="Order"><a href="#Order" class="headerlink" title="Order"></a><code>Order</code></h3><p>Sắp xếp ưu tiên khi xử lý request</p>
<h3 id="Satisfy"><a href="#Satisfy" class="headerlink" title="Satisfy"></a><code>Satisfy</code></h3><p>Mô tả: tích hợp giữa host-level access control và xác thực người dùng</p>
<p>Các chính sách về truy cập nếu cả Allow và Require được sử dụng. Tham số có thể là All hoặc Any. Tham số này hữu ích nếu quyền truy cập vào 1 số khu vực cụ thể bị hạn chế, cần có thông tin xác thực để truy cập chẳng hạn.</p>
<p>Ví dụ: nếu bạn muốn cho phép mọi người trong mạng của mình có quyền truy cập không hạn chế vào một phần của trang web của bạn, nhưng yêu cầu những người bên ngoài mạng của bạn cung cấp mật khẩu, bạn có thể sử dụng một cấu hình tương tự như sau:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Require valid-user</span><br><span class="line">Allow from 192.168.1</span><br><span class="line">Satisfy Any</span><br></pre></td></tr></table></figure><br>Trường hợp khác hay được sử dụng hơn Satisfy directive để nới thêm truy cập cho 1 thư mục con<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;Directory &quot;&#x2F;var&#x2F;www&#x2F;private&quot;&gt;</span><br><span class="line">    Require valid-user</span><br><span class="line">&lt;&#x2F;Directory&gt;</span><br><span class="line"></span><br><span class="line">&lt;Directory &quot;&#x2F;var&#x2F;www&#x2F;private&#x2F;public&quot;&gt;</span><br><span class="line">    Allow from all</span><br><span class="line">    Satisfy Any</span><br><span class="line">&lt;&#x2F;Directory&gt;</span><br></pre></td></tr></table></figure><br>Trong ví dụ trên, sự xác thực cần được thực hiện khi truy cập vào đường dẫn /var/www/private nhưng lại không cần khi truy cập vào đường dẫn /var/www/private/public</p>
<p>Ý kiến cá nhân về <code>Require</code> và <code>Allow</code>:</p>
<ul>
<li><p>Tham số require thiên về việc xác thực người dùng được truy cập vào ứng dụng</p>
</li>
<li><p>Tham số Allow liên quan đến hosts nào và địa chỉ IP</p>
</li>
</ul>
<h3 id="Require"><a href="#Require" class="headerlink" title="Require"></a><code>Require</code></h3><p>Xác thực, phân quyền người dùng. <a target="_blank" rel="noopener" href="https://httpd.apache.org/docs/2.4/mod/mod_authz_core.html">Chi tiết</a></p>
<h1 id="Tong-ket"><a href="#Tong-ket" class="headerlink" title="Tổng kết"></a>Tổng kết</h1><ul>
<li>Apache quản lý 3 thứ: <code>sites</code> (virtual host), <code>conf</code>, <code>modules</code></li>
<li><code>apache2ctl</code>, <code>apachectl</code> giúp thao tác apache tốt hơn nhờ tương tác với các tiến trình ngầm của apache và hiển thị dưới dạng giao diện</li>
<li>Khi cấu hình virtual host có thể dùng <strong>Name-based vs. IP-based Virtual Hosts</strong>. Với IP-based Virtual Hosts yêu cầu bạn cần có nhiều địa chỉ IP (không thì bật nhiều host cũng được, môi trường test hoặc staging có thể mở nhiều host, khi lên product chỉ mở 80 mới là vấn đề)<br>Khi cấu hình virtual host hãy tham khảo các tham số như ở trên nhé <code>ServerName</code>, <code>ServerAlias</code>, <code>Required</code>, <code>Deny</code>, <code>Allow</code>, <code>Order</code> :D</li>
</ul>
</div><div class="article-licensing box"><div class="licensing-title"><p>[Web Server] Apache Notes</p><p><a href="http://yoursite.com/2019/11/21/Web-Server-Apache-Note/">http://yoursite.com/2019/11/21/Web-Server-Apache-Note/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>Ming</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2019-11-21</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2021-04-10</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/apache2/">apache2</a></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><div class="social-share"></div><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">Like this article? Support the author with</h3><div class="buttons is-centered"><a class="button donate" href="https://www.buymeacoffee.com/mingnv" target="_blank" rel="noopener" data-type="buymeacoffee"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>Buy me a coffee</span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2019/11/22/Laravel-Testing-Notes/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">[Laravel] Testing Notes</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2019/11/17/Linux-Permission-Management/"><span class="level-item">[Linux]: Permission Management</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'http://yoursite.com/2019/11/21/Web-Server-Apache-Note/';
            this.page.identifier = '2019/11/21/Web-Server-Apache-Note/';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'minh' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="https://octodex.github.com/images/spidertocat.png" alt="Minh NV"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Minh NV</p><p class="is-size-6 is-block">_N.V.M_</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Hanoi city, Vietnam</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">118</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">34</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">45</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/minhnv2306" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/minhnv2306"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://www.facebook.com/profile.php?id=100003860456359"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="http://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="http://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/AWS-Practitioner/"><span class="level-start"><span class="level-item">AWS Practitioner</span></span><span class="level-end"><span class="level-item tag">16</span></span></a></li><li><a class="level is-mobile" href="/categories/AWS-Training/"><span class="level-start"><span class="level-item">AWS Training</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/Authentication/"><span class="level-start"><span class="level-item">Authentication</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Clean-our-code/"><span class="level-start"><span class="level-item">Clean our code</span></span><span class="level-end"><span class="level-item tag">13</span></span></a><ul><li><a class="level is-mobile" href="/categories/Clean-our-code/Clean-code-Robert-C-Martin/"><span class="level-start"><span class="level-item">Clean code - Robert C. Martin</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/Clean-our-code/Refactoring-to-Collections/"><span class="level-start"><span class="level-item">Refactoring to Collections</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Database/"><span class="level-start"><span class="level-item">Database</span></span><span class="level-end"><span class="level-item tag">2</span></span></a><ul><li><a class="level is-mobile" href="/categories/Database/MongoDB/"><span class="level-start"><span class="level-item">MongoDB</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Database/MySQL/"><span class="level-start"><span class="level-item">MySQL</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Development-and-Operation/"><span class="level-start"><span class="level-item">Development and Operation</span></span><span class="level-end"><span class="level-item tag">32</span></span></a><ul><li><a class="level is-mobile" href="/categories/Development-and-Operation/CircleCI-2-0/"><span class="level-start"><span class="level-item">CircleCI 2.0</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/Development-and-Operation/Docker/"><span class="level-start"><span class="level-item">Docker</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/categories/Development-and-Operation/Google-Cloud-Platform/"><span class="level-start"><span class="level-item">Google Cloud Platform</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Development-and-Operation/Laravel/"><span class="level-start"><span class="level-item">Laravel</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/categories/Development-and-Operation/Linux-OS/"><span class="level-start"><span class="level-item">Linux OS</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/Development-and-Operation/Web-Server/"><span class="level-start"><span class="level-item">Web Server</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/JAVaScript/"><span class="level-start"><span class="level-item">JAVaScript</span></span><span class="level-end"><span class="level-item tag">6</span></span></a><ul><li><a class="level is-mobile" href="/categories/JAVaScript/Asynchronous/"><span class="level-start"><span class="level-item">Asynchronous</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/JAVaScript/Event/"><span class="level-start"><span class="level-item">Event</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/JAVaScript/React/"><span class="level-start"><span class="level-item">React</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/JP/"><span class="level-start"><span class="level-item">JP</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/Others/"><span class="level-start"><span class="level-item">Others</span></span><span class="level-end"><span class="level-item tag">13</span></span></a><ul><li><a class="level is-mobile" href="/categories/Others/Cong-cu-lap-trinh/"><span class="level-start"><span class="level-item">Công cụ lập trình</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Others/PHPCS/"><span class="level-start"><span class="level-item">PHPCS</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Others/Suu-tam/"><span class="level-start"><span class="level-item">Sưu tầm</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Others/Website-Optimization/"><span class="level-start"><span class="level-item">Website Optimization</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/The-Art-of-Readable-Code/"><span class="level-start"><span class="level-item">The Art of Readable Code</span></span><span class="level-end"><span class="level-item tag">19</span></span></a><ul><li><a class="level is-mobile" href="/categories/The-Art-of-Readable-Code/Chapter-1-Code-Should-Be-Easy-to-Understand/"><span class="level-start"><span class="level-item">Chapter 1 - Code Should Be Easy to Understand</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/The-Art-of-Readable-Code/Part-I-Surface-Level-Improvements/"><span class="level-start"><span class="level-item">Part I - Surface-Level Improvements</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/The-Art-of-Readable-Code/Part-II-Simplifying-Loops-and-Logic/"><span class="level-start"><span class="level-item">Part II - Simplifying Loops and Logic</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/The-Art-of-Readable-Code/Part-III-Reorganizing-Your-Code/"><span class="level-start"><span class="level-item">Part III - Reorganizing Your Code</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/The-Art-of-Readable-Code/Part-IV-Selected-Topics/"><span class="level-start"><span class="level-item">Part IV - Selected Topics</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Unit-Test/"><span class="level-start"><span class="level-item">Unit Test</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/special-day/"><span class="level-start"><span class="level-item">special day</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/API/"><span class="tag">API</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CI-CD/"><span class="tag">CI/CD</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Kanji/"><span class="tag">Kanji</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux-command-line/"><span class="tag">Linux command line</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/apache2/"><span class="tag">apache2</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/async-programing/"><span class="tag">async programing</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/authentication/"><span class="tag">authentication</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/aws-labs/"><span class="tag">aws labs</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/clean-comment/"><span class="tag">clean comment</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/clean-error/"><span class="tag">clean error</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/clean-function/"><span class="tag">clean function</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/collection/"><span class="tag">collection</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/configuration/"><span class="tag">configuration</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker/"><span class="tag">docker</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker-command/"><span class="tag">docker command</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker-compose-file-format/"><span class="tag">docker compose file format</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker-best-practice/"><span class="tag">docker-best-practice</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker-compose-yml/"><span class="tag">docker-compose.yml</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker-instructions-docker-best-practice/"><span class="tag">docker-instructions docker-best-practice</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker-network/"><span class="tag">docker-network</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/docker-volume/"><span class="tag">docker-volume</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/event/"><span class="tag">event</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/event-notification/"><span class="tag">event notification</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/excelfile/"><span class="tag">excelfile</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/gcp/"><span class="tag">gcp</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/git/"><span class="tag">git</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/groupby-mysql/"><span class="tag">groupby, mysql</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jquery-validation/"><span class="tag">jquery-validation</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/kubernetes/"><span class="tag">kubernetes</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mongoDB/"><span class="tag">mongoDB</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/naming/"><span class="tag">naming</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/phpcs/"><span class="tag">phpcs</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/phpcs-phpcsfixer/"><span class="tag">phpcs phpcsfixer</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/process-management/"><span class="tag">process management</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/react-boilerplate/"><span class="tag">react boilerplate</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/regex/"><span class="tag">regex</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/requests/"><span class="tag">requests</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/stripe/"><span class="tag">stripe</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sudo-command/"><span class="tag">sudo command</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tips-laravel/"><span class="tag">tips laravel</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tracking-php-script/"><span class="tag">tracking php script</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/unit-test/"><span class="tag">unit test</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/validation/"><span class="tag">validation</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vba/"><span class="tag">vba</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vim/"><span class="tag">vim</span><span class="tag">1</span></a></div></div></div></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2021/08/"><span class="level-start"><span class="level-item">August 2021</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/07/"><span class="level-start"><span class="level-item">July 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/06/"><span class="level-start"><span class="level-item">June 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/05/"><span class="level-start"><span class="level-item">May 2021</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/04/"><span class="level-start"><span class="level-item">April 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/02/"><span class="level-start"><span class="level-item">February 2021</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/01/"><span class="level-start"><span class="level-item">January 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/06/"><span class="level-start"><span class="level-item">June 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/05/"><span class="level-start"><span class="level-item">May 2020</span></span><span class="level-end"><span class="level-item tag">23</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/04/"><span class="level-start"><span class="level-item">April 2020</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/02/"><span class="level-start"><span class="level-item">February 2020</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/01/"><span class="level-start"><span class="level-item">January 2020</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/12/"><span class="level-start"><span class="level-item">December 2019</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/11/"><span class="level-start"><span class="level-item">November 2019</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/09/"><span class="level-start"><span class="level-item">September 2019</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/07/"><span class="level-start"><span class="level-item">July 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/04/"><span class="level-start"><span class="level-item">April 2019</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li></ul></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe for updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="level is-mobile" href="#Tong-quan"><span class="level-left"><span class="level-item">1</span><span class="level-item">Tổng quan</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Docs-chinh"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">Docs chính</span></span></a></li><li><a class="level is-mobile" href="#Apache2-quan-ly-3-thu-quan-trong"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">Apache2 quản lý 3 thứ quan trọng</span></span></a></li><li><a class="level is-mobile" href="#Server-Logs"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">Server Logs</span></span></a></li><li><a class="level is-mobile" href="#Port-config"><span class="level-left"><span class="level-item">1.4</span><span class="level-item">Port config</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Mot-vai-modules-trong-Apache2"><span class="level-left"><span class="level-item">2</span><span class="level-item">Một vài modules trong Apache2</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Rewrite-Module"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">Rewrite Module</span></span></a></li></ul></li><li><a class="level is-mobile" href="#apacha2ctl-apachectl-command"><span class="level-left"><span class="level-item">3</span><span class="level-item">$apacha2ctl, $apachectl command</span></span></a></li><li><a class="level is-mobile" href="#Cau-hinh-virtual-host"><span class="level-left"><span class="level-item">4</span><span class="level-item">Cấu hình virtual host</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Cac-tham-so-co-ban"><span class="level-left"><span class="level-item">4.1</span><span class="level-item">Các tham số cơ bản</span></span></a></li><li><a class="level is-mobile" href="#Cac-tham-so-sub-directories"><span class="level-left"><span class="level-item">4.2</span><span class="level-item">Các tham số sub-directories</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#AllowOverride"><span class="level-left"><span class="level-item">4.2.1</span><span class="level-item">AllowOverride</span></span></a></li><li><a class="level is-mobile" href="#Allow-from"><span class="level-left"><span class="level-item">4.2.2</span><span class="level-item">Allow from</span></span></a></li><li><a class="level is-mobile" href="#Deny-from"><span class="level-left"><span class="level-item">4.2.3</span><span class="level-item">Deny from</span></span></a></li><li><a class="level is-mobile" href="#Order"><span class="level-left"><span class="level-item">4.2.4</span><span class="level-item">Order</span></span></a></li><li><a class="level is-mobile" href="#Satisfy"><span class="level-left"><span class="level-item">4.2.5</span><span class="level-item">Satisfy</span></span></a></li><li><a class="level is-mobile" href="#Require"><span class="level-left"><span class="level-item">4.2.6</span><span class="level-item">Require</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#Tong-ket"><span class="level-left"><span class="level-item">5</span><span class="level-item">Tổng kết</span></span></a></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-08-08T10:06:02.000Z">2021-08-08</time></p><p class="title"><a href="/2021/08/08/Lab-Section-8-S3/">[Lab] Section 8: S3</a></p><p class="categories"><a href="/categories/AWS-Practitioner/">AWS Practitioner</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-08-08T03:36:45.000Z">2021-08-08</time></p><p class="title"><a href="/2021/08/08/Lab-Section-7-Elastic-Load-Balancing-Auto-Scaling-Groups/">[Lab] Section 7: Elastic Load Balancing &amp; Auto Scaling Groups</a></p><p class="categories"><a href="/categories/AWS-Practitioner/">AWS Practitioner</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-08-06T14:46:38.000Z">2021-08-06</time></p><p class="title"><a href="/2021/08/06/Lab-Section-6-EC2-Instance-Storage/">[Lab] Section 6: EC2 Instance Storage</a></p><p class="categories"><a href="/categories/AWS-Practitioner/">AWS Practitioner</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-08-01T11:33:54.000Z">2021-08-01</time></p><p class="title"><a href="/2021/08/01/Tan-man-ve-index-trong-MySQL/">Tản mạn về index trong MySQL</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-07-14T14:54:50.000Z">2021-07-14</time></p><p class="title"><a href="/2021/07/14/Section-18-Account-Management-Billing-Support/">Section 18: Account Management, Billing &amp; Support</a></p><p class="categories"><a href="/categories/AWS-Practitioner/">AWS Practitioner</a></p></div></article></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://blog.zhangruipeng.me/hexo-theme-icarus/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Icarus blog</span></span><span class="level-right"><span class="level-item tag">blog.zhangruipeng.me</span></span></a></li><li><a class="level is-mobile" href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Icarus github</span></span><span class="level-right"><span class="level-item tag">github.com</span></span></a></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.png" alt="Hello, I am Minh" height="28"></a><p class="is-size-7"><span>&copy; 2021 Ming</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">Visited by <span id="busuanzi_value_site_uv">0</span> users</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>